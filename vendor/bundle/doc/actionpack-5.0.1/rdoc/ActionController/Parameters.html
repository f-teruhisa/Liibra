<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>class ActionController::Parameters - actionpack-5.0.1 Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../";
</script>

<script src="../js/jquery.js"></script>
<script src="../js/darkfish.js"></script>

<link href="../css/fonts.css" rel="stylesheet">
<link href="../css/rdoc.css" rel="stylesheet">



<body id="top" role="document" class="class">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../table_of_contents.html#pages">Pages</a>
    <a href="../table_of_contents.html#classes">Classes</a>
    <a href="../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    <div id="parent-class-section" class="nav-section">
  <h3>Parent</h3>

  
  <p class="link">Object
  
</div>

    
    
    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li ><a href="#method-c-new">::new</a>
    
    <li ><a href="#method-i-3D-3D">#==</a>
    
    <li ><a href="#method-i-5B-5D">#[]</a>
    
    <li ><a href="#method-i-5B-5D-3D">#[]=</a>
    
    <li ><a href="#method-i-array_of_permitted_scalars-3F">#array_of_permitted_scalars?</a>
    
    <li ><a href="#method-i-convert_hashes_to_parameters">#convert_hashes_to_parameters</a>
    
    <li ><a href="#method-i-convert_parameters_to_hashes">#convert_parameters_to_hashes</a>
    
    <li ><a href="#method-i-convert_value_to_parameters">#convert_value_to_parameters</a>
    
    <li ><a href="#method-i-converted_arrays">#converted_arrays</a>
    
    <li ><a href="#method-i-deep_dup">#deep_dup</a>
    
    <li ><a href="#method-i-delete">#delete</a>
    
    <li ><a href="#method-i-delete_if">#delete_if</a>
    
    <li ><a href="#method-i-dig">#dig</a>
    
    <li ><a href="#method-i-each">#each</a>
    
    <li ><a href="#method-i-each_element">#each_element</a>
    
    <li ><a href="#method-i-each_pair">#each_pair</a>
    
    <li ><a href="#method-i-except">#except</a>
    
    <li ><a href="#method-i-extract-21">#extract!</a>
    
    <li ><a href="#method-i-fetch">#fetch</a>
    
    <li ><a href="#method-i-fields_for_style-3F">#fields_for_style?</a>
    
    <li ><a href="#method-i-hash_filter">#hash_filter</a>
    
    <li class="calls-super" ><a href="#method-i-initialize_copy">#initialize_copy</a>
    
    <li ><a href="#method-i-inspect">#inspect</a>
    
    <li ><a href="#method-i-keep_if">#keep_if</a>
    
    <li ><a href="#method-i-merge">#merge</a>
    
    <li ><a href="#method-i-merge-21">#merge!</a>
    
    <li class="calls-super" ><a href="#method-i-method_missing">#method_missing</a>
    
    <li ><a href="#method-i-new_instance_with_inherited_permitted_status">#new_instance_with_inherited_permitted_status</a>
    
    <li ><a href="#method-i-non_scalar-3F">#non_scalar?</a>
    
    <li ><a href="#method-i-permit">#permit</a>
    
    <li ><a href="#method-i-permit-21">#permit!</a>
    
    <li ><a href="#method-i-permitted-3D">#permitted=</a>
    
    <li ><a href="#method-i-permitted-3F">#permitted?</a>
    
    <li ><a href="#method-i-permitted_scalar-3F">#permitted_scalar?</a>
    
    <li ><a href="#method-i-permitted_scalar_filter">#permitted_scalar_filter</a>
    
    <li ><a href="#method-i-reject">#reject</a>
    
    <li ><a href="#method-i-reject-21">#reject!</a>
    
    <li ><a href="#method-i-require">#require</a>
    
    <li ><a href="#method-i-required">#required</a>
    
    <li ><a href="#method-i-select">#select</a>
    
    <li ><a href="#method-i-select-21">#select!</a>
    
    <li ><a href="#method-i-slice">#slice</a>
    
    <li ><a href="#method-i-slice-21">#slice!</a>
    
    <li ><a href="#method-i-to_h">#to_h</a>
    
    <li ><a href="#method-i-to_unsafe_h">#to_unsafe_h</a>
    
    <li ><a href="#method-i-to_unsafe_hash">#to_unsafe_hash</a>
    
    <li ><a href="#method-i-transform_keys">#transform_keys</a>
    
    <li ><a href="#method-i-transform_keys-21">#transform_keys!</a>
    
    <li ><a href="#method-i-transform_values">#transform_values</a>
    
    <li ><a href="#method-i-transform_values-21">#transform_values!</a>
    
    <li ><a href="#method-i-unpermitted_keys">#unpermitted_keys</a>
    
    <li ><a href="#method-i-unpermitted_parameters-21">#unpermitted_parameters!</a>
    
    <li ><a href="#method-i-values_at">#values_at</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="class-ActionController::Parameters">
  <h1 id="class-ActionController::Parameters" class="class">
    class ActionController::Parameters
  </h1>

  <section class="description">
    
<h2 id="class-ActionController::Parameters-label-Action+Controller+Parameters">Action Controller Parameters<span><a href="#class-ActionController::Parameters-label-Action+Controller+Parameters">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>Allows you to choose which attributes should be whitelisted for mass
updating and thus prevent accidentally exposing that which shouldn&#39;t be
exposed. Provides two methods for this purpose: <a
href="Parameters.html#method-i-require">require</a> and <a
href="Parameters.html#method-i-permit">permit</a>. The former is used to
mark parameters as required. The latter is used to set the parameter as
permitted and limit which attributes should be allowed for mass updating.</p>

<pre class="ruby"><span class="ruby-identifier">params</span> = <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Parameters</span>.<span class="ruby-identifier">new</span>({
  <span class="ruby-identifier">person</span><span class="ruby-operator">:</span> {
    <span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;Francesco&#39;</span>,
    <span class="ruby-identifier">age</span><span class="ruby-operator">:</span>  <span class="ruby-value">22</span>,
    <span class="ruby-identifier">role</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;admin&#39;</span>
  }
})

<span class="ruby-identifier">permitted</span> = <span class="ruby-identifier">params</span>.<span class="ruby-identifier">require</span>(:<span class="ruby-identifier">person</span>).<span class="ruby-identifier">permit</span>(:<span class="ruby-identifier">name</span>, :<span class="ruby-identifier">age</span>)
<span class="ruby-identifier">permitted</span>            <span class="ruby-comment"># =&gt; {&quot;name&quot;=&gt;&quot;Francesco&quot;, &quot;age&quot;=&gt;22}</span>
<span class="ruby-identifier">permitted</span>.<span class="ruby-identifier">class</span>      <span class="ruby-comment"># =&gt; ActionController::Parameters</span>
<span class="ruby-identifier">permitted</span>.<span class="ruby-identifier">permitted?</span> <span class="ruby-comment"># =&gt; true</span>

<span class="ruby-constant">Person</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">update!</span>(<span class="ruby-identifier">permitted</span>)
<span class="ruby-comment"># =&gt; #&lt;Person id: 1, name: &quot;Francesco&quot;, age: 22, role: &quot;user&quot;&gt;</span>
</pre>

<p>It provides two options that controls the top-level behavior of new
instances:</p>
<ul><li>
<p><code>permit_all_parameters</code> - If it&#39;s <code>true</code>, all the
parameters will be permitted by default. The default is <code>false</code>.</p>
</li><li>
<p><code>action_on_unpermitted_parameters</code> - Allow to control the
behavior when parameters that are not explicitly permitted are found. The
values can be <code>:log</code> to write a message on the logger or
<code>:raise</code> to raise <a
href="UnpermittedParameters.html">ActionController::UnpermittedParameters</a>
exception. The default value is <code>:log</code> in test and development
environments, <code>false</code> otherwise.</p>
</li></ul>

<p>Examples:</p>

<pre class="ruby"><span class="ruby-identifier">params</span> = <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Parameters</span>.<span class="ruby-identifier">new</span>
<span class="ruby-identifier">params</span>.<span class="ruby-identifier">permitted?</span> <span class="ruby-comment"># =&gt; false</span>

<span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Parameters</span>.<span class="ruby-identifier">permit_all_parameters</span> = <span class="ruby-keyword">true</span>

<span class="ruby-identifier">params</span> = <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Parameters</span>.<span class="ruby-identifier">new</span>
<span class="ruby-identifier">params</span>.<span class="ruby-identifier">permitted?</span> <span class="ruby-comment"># =&gt; true</span>

<span class="ruby-identifier">params</span> = <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Parameters</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">a</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;123&quot;</span>, <span class="ruby-identifier">b</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;456&quot;</span>)
<span class="ruby-identifier">params</span>.<span class="ruby-identifier">permit</span>(:<span class="ruby-identifier">c</span>)
<span class="ruby-comment"># =&gt; {}</span>

<span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Parameters</span>.<span class="ruby-identifier">action_on_unpermitted_parameters</span> = :<span class="ruby-identifier">raise</span>

<span class="ruby-identifier">params</span> = <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Parameters</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">a</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;123&quot;</span>, <span class="ruby-identifier">b</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;456&quot;</span>)
<span class="ruby-identifier">params</span>.<span class="ruby-identifier">permit</span>(:<span class="ruby-identifier">c</span>)
<span class="ruby-comment"># =&gt; ActionController::UnpermittedParameters: found unpermitted keys: a, b</span>
</pre>

<p>Please note that these options *are not thread-safe*. In a multi-threaded
environment they should only be set once at boot-time and never mutated at
runtime.</p>

<p>You can fetch values of <code>ActionController::Parameters</code> using
either <code>:key</code> or <code>&quot;key&quot;</code>.</p>

<pre class="ruby"><span class="ruby-identifier">params</span> = <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Parameters</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">key</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;value&#39;</span>)
<span class="ruby-identifier">params</span>[:<span class="ruby-identifier">key</span>]  <span class="ruby-comment"># =&gt; &quot;value&quot;</span>
<span class="ruby-identifier">params</span>[<span class="ruby-string">&quot;key&quot;</span>] <span class="ruby-comment"># =&gt; &quot;value&quot;</span>
</pre>

  </section>

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    
    <section class="constants-list">
      <header>
        <h3>Constants</h3>
      </header>
      <dl>
      
        <dt id="EMPTY_ARRAY">EMPTY_ARRAY
        
        <dd>
        
      
        <dt id="PERMITTED_SCALAR_TYPES">PERMITTED_SCALAR_TYPES
        
        <dd><p>This is a white list of permitted scalar types that includes the ones
supported in XML and JSON requests.</p>

<p>This list is in particular used to filter ordinary requests, String goes as
first element to quickly short-circuit the common case.</p>

<p>If you modify this collection please update the <a href="API.html">API</a>
of <code>permit</code> above.</p>
        
      
      </dl>
    </section>
    

    
    <section class="attribute-method-details" class="method-section">
      <header>
        <h3>Attributes</h3>
      </header>

      
      <div id="attribute-i-parameters" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">parameters</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
    </section>
    

    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Class Methods</h3>
       </header>

    
      <div id="method-c-new" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">new</span><span
            class="method-args">(parameters = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns a new instance of <code>ActionController::Parameters</code>. Also,
sets the <code>permitted</code> attribute to the default value of
<code>ActionController::Parameters.permit_all_parameters</code>.</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Person</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">params</span> = <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Parameters</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;Francesco&#39;</span>)
<span class="ruby-identifier">params</span>.<span class="ruby-identifier">permitted?</span>  <span class="ruby-comment"># =&gt; false</span>
<span class="ruby-constant">Person</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">params</span>) <span class="ruby-comment"># =&gt; ActiveModel::ForbiddenAttributesError</span>

<span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Parameters</span>.<span class="ruby-identifier">permit_all_parameters</span> = <span class="ruby-keyword">true</span>

<span class="ruby-identifier">params</span> = <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Parameters</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;Francesco&#39;</span>)
<span class="ruby-identifier">params</span>.<span class="ruby-identifier">permitted?</span>  <span class="ruby-comment"># =&gt; true</span>
<span class="ruby-constant">Person</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">params</span>) <span class="ruby-comment"># =&gt; #&lt;Person id: nil, name: &quot;Francesco&quot;&gt;</span>
</pre>
          
          

          
          <div class="method-source-code" id="new-source">
            <pre><span class="ruby-comment"># File lib/action_controller/metal/strong_parameters.rb, line 143</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">parameters</span> = {})
  <span class="ruby-ivar">@parameters</span> = <span class="ruby-identifier">parameters</span>.<span class="ruby-identifier">with_indifferent_access</span>
  <span class="ruby-ivar">@permitted</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">permit_all_parameters</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

    
      <div id="method-i-3D-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">==</span><span
            class="method-args">(other)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns true if another <code>Parameters</code> object contains the same
content and permitted flag.</p>
          
          

          
          <div class="method-source-code" id="3D-3D-source">
            <pre><span class="ruby-comment"># File lib/action_controller/metal/strong_parameters.rb, line 150</span>
    <span class="ruby-keyword">def</span> <span class="ruby-operator">==</span>(<span class="ruby-identifier">other</span>)
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">other</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:permitted?</span>)
        <span class="ruby-keyword">self</span>.<span class="ruby-identifier">permitted?</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">other</span>.<span class="ruby-identifier">permitted?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">parameters</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">other</span>.<span class="ruby-identifier">parameters</span>
      <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">other</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>)
        <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Deprecation</span>.<span class="ruby-identifier">warn</span> <span class="ruby-string">&quot;          Comparing equality between `ActionController::Parameters` and a
          `Hash` is deprecated and will be removed in Rails 5.1. Please only do
          comparisons between instances of `ActionController::Parameters`. If
          you need to compare to a hash, first convert it using
          `ActionController::Parameters#new`.
&quot;</span>.<span class="ruby-identifier">squish</span>
        <span class="ruby-ivar">@parameters</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">other</span>.<span class="ruby-identifier">with_indifferent_access</span>
      <span class="ruby-keyword">else</span>
        <span class="ruby-ivar">@parameters</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">other</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-5B-5D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">[]</span><span
            class="method-args">(key)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns a parameter for the given <code>key</code>. If not found, returns
<code>nil</code>.</p>

<pre class="ruby"><span class="ruby-identifier">params</span> = <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Parameters</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">person</span><span class="ruby-operator">:</span> { <span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;Francesco&#39;</span> })
<span class="ruby-identifier">params</span>[:<span class="ruby-identifier">person</span>] <span class="ruby-comment"># =&gt; {&quot;name&quot;=&gt;&quot;Francesco&quot;}</span>
<span class="ruby-identifier">params</span>[:<span class="ruby-identifier">none</span>]   <span class="ruby-comment"># =&gt; nil</span>
</pre>
          
          

          
          <div class="method-source-code" id="5B-5D-source">
            <pre><span class="ruby-comment"># File lib/action_controller/metal/strong_parameters.rb, line 409</span>
<span class="ruby-keyword">def</span> <span class="ruby-operator">[]</span>(<span class="ruby-identifier">key</span>)
  <span class="ruby-identifier">convert_hashes_to_parameters</span>(<span class="ruby-identifier">key</span>, <span class="ruby-ivar">@parameters</span>[<span class="ruby-identifier">key</span>])
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-5B-5D-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">[]=</span><span
            class="method-args">(key, value)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Assigns a value to a given <code>key</code>. The given key may still get
filtered out when <code>permit</code> is called.</p>
          
          

          
          <div class="method-source-code" id="5B-5D-3D-source">
            <pre><span class="ruby-comment"># File lib/action_controller/metal/strong_parameters.rb, line 415</span>
<span class="ruby-keyword">def</span> <span class="ruby-operator">[]=</span>(<span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span>)
  <span class="ruby-ivar">@parameters</span>[<span class="ruby-identifier">key</span>] = <span class="ruby-identifier">value</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-converted_arrays" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">converted_arrays</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Attribute that keeps track of converted arrays, if any, to avoid double
looping in the common use case permit + mass-assignment. Defined in a
method to instantiate it only if needed.</p>

<p><a href="Testing.html">Testing</a> membership still loops, but it&#39;s
going to be faster than our own loop that converts values. Also, we are not
going to build a new array object per fetch.</p>
          
          

          
          <div class="method-source-code" id="converted_arrays-source">
            <pre><span class="ruby-comment"># File lib/action_controller/metal/strong_parameters.rb, line 217</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">converted_arrays</span>
  <span class="ruby-ivar">@converted_arrays</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">Set</span>.<span class="ruby-identifier">new</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-deep_dup" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">deep_dup</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns duplicate of object including all parameters</p>
          
          

          
          <div class="method-source-code" id="deep_dup-source">
            <pre><span class="ruby-comment"># File lib/action_controller/metal/strong_parameters.rb, line 652</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">deep_dup</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@parameters</span>.<span class="ruby-identifier">deep_dup</span>).<span class="ruby-identifier">tap</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">duplicate</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">duplicate</span>.<span class="ruby-identifier">permitted</span> = <span class="ruby-ivar">@permitted</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-delete" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">delete</span><span
            class="method-args">(key)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Deletes and returns a key-value pair from <code>Parameters</code> whose key
is equal to key. If the key is not found, returns the default value. If the
optional code block is given and the key is not found, pass in the key and
return the result of block.</p>
          
          

          
          <div class="method-source-code" id="delete-source">
            <pre><span class="ruby-comment"># File lib/action_controller/metal/strong_parameters.rb, line 540</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">delete</span>(<span class="ruby-identifier">key</span>)
  <span class="ruby-identifier">convert_value_to_parameters</span>(<span class="ruby-ivar">@parameters</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">key</span>))
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-delete_if" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">delete_if</span><span
            class="method-args">(&block)</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="Parameters.html#method-i-reject-21">reject!</a>
        </div>
        
      </div>

    
      <div id="method-i-dig" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">dig</span><span
            class="method-args">(*keys)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Extracts the nested parameter from the given <code>keys</code> by calling
<code>dig</code> at each step. Returns <code>nil</code> if any intermediate
step is <code>nil</code>.</p>

<p>params = <a href="Parameters.html#method-c-new">::new</a>(foo: { bar: {
baz: 1 } }) params.dig(:foo, :bar, :baz) # =&gt; 1 params.dig(:foo, :zot,
:xyz) # =&gt; nil</p>

<p>params2 = <a href="Parameters.html#method-c-new">::new</a>(foo: [10, 11,
12]) params2.dig(:foo, 1) # =&gt; 11</p>
          
          

          
          <div class="method-source-code" id="dig-source">
            <pre><span class="ruby-comment"># File lib/action_controller/metal/strong_parameters.rb, line 452</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">dig</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">keys</span>)
  <span class="ruby-identifier">convert_value_to_parameters</span>(<span class="ruby-ivar">@parameters</span>.<span class="ruby-identifier">dig</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">keys</span>))
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-each" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">each</span><span
            class="method-args">(&block)</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="Parameters.html#method-i-each_pair">each_pair</a>
        </div>
        
      </div>

    
      <div id="method-i-each_pair" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">each_pair</span><span
            class="method-args">() { |key, convert_hashes_to_parameters(key, value)| ... }</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Convert all hashes in values into parameters, then yield each pair in the
same way as <code>Hash#each_pair</code></p>
          
          

          
          <div class="method-source-code" id="each_pair-source">
            <pre><span class="ruby-comment"># File lib/action_controller/metal/strong_parameters.rb, line 203</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">each_pair</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-ivar">@parameters</span>.<span class="ruby-identifier">each_pair</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">yield</span> <span class="ruby-identifier">key</span>, <span class="ruby-identifier">convert_hashes_to_parameters</span>(<span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="Parameters.html#method-i-each">each</a>
        </div>
        

        
      </div>

    
      <div id="method-i-except" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">except</span><span
            class="method-args">(*keys)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns a new <code>ActionController::Parameters</code> instance that
filters out the given <code>keys</code>.</p>

<pre class="ruby"><span class="ruby-identifier">params</span> = <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Parameters</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">a</span><span class="ruby-operator">:</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">b</span><span class="ruby-operator">:</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">c</span><span class="ruby-operator">:</span> <span class="ruby-value">3</span>)
<span class="ruby-identifier">params</span>.<span class="ruby-identifier">except</span>(:<span class="ruby-identifier">a</span>, :<span class="ruby-identifier">b</span>) <span class="ruby-comment"># =&gt; {&quot;c&quot;=&gt;3}</span>
<span class="ruby-identifier">params</span>.<span class="ruby-identifier">except</span>(:<span class="ruby-identifier">d</span>)     <span class="ruby-comment"># =&gt; {&quot;a&quot;=&gt;1,&quot;b&quot;=&gt;2,&quot;c&quot;=&gt;3}</span>
</pre>
          
          

          
          <div class="method-source-code" id="except-source">
            <pre><span class="ruby-comment"># File lib/action_controller/metal/strong_parameters.rb, line 481</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">except</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">keys</span>)
  <span class="ruby-identifier">new_instance_with_inherited_permitted_status</span>(<span class="ruby-ivar">@parameters</span>.<span class="ruby-identifier">except</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">keys</span>))
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-extract-21" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">extract!</span><span
            class="method-args">(*keys)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Removes and returns the key/value pairs matching the given keys.</p>

<pre class="ruby"><span class="ruby-identifier">params</span> = <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Parameters</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">a</span><span class="ruby-operator">:</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">b</span><span class="ruby-operator">:</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">c</span><span class="ruby-operator">:</span> <span class="ruby-value">3</span>)
<span class="ruby-identifier">params</span>.<span class="ruby-identifier">extract!</span>(:<span class="ruby-identifier">a</span>, :<span class="ruby-identifier">b</span>) <span class="ruby-comment"># =&gt; {&quot;a&quot;=&gt;1, &quot;b&quot;=&gt;2}</span>
<span class="ruby-identifier">params</span>                  <span class="ruby-comment"># =&gt; {&quot;c&quot;=&gt;3}</span>
</pre>
          
          

          
          <div class="method-source-code" id="extract-21-source">
            <pre><span class="ruby-comment"># File lib/action_controller/metal/strong_parameters.rb, line 490</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">extract!</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">keys</span>)
  <span class="ruby-identifier">new_instance_with_inherited_permitted_status</span>(<span class="ruby-ivar">@parameters</span>.<span class="ruby-identifier">extract!</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">keys</span>))
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-fetch" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">fetch</span><span
            class="method-args">(key, *args) { || ... }</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns a parameter for the given <code>key</code>. If the <code>key</code>
can&#39;t be found, there are several options: With no other arguments, it
will raise an <code>ActionController::ParameterMissing</code> error; if
more arguments are given, then that will be returned; if a block is given,
then that will be run and its result returned.</p>

<pre class="ruby"><span class="ruby-identifier">params</span> = <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Parameters</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">person</span><span class="ruby-operator">:</span> { <span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;Francesco&#39;</span> })
<span class="ruby-identifier">params</span>.<span class="ruby-identifier">fetch</span>(:<span class="ruby-identifier">person</span>)               <span class="ruby-comment"># =&gt; {&quot;name&quot;=&gt;&quot;Francesco&quot;}</span>
<span class="ruby-identifier">params</span>.<span class="ruby-identifier">fetch</span>(:<span class="ruby-identifier">none</span>)                 <span class="ruby-comment"># =&gt; ActionController::ParameterMissing: param is missing or the value is empty: none</span>
<span class="ruby-identifier">params</span>.<span class="ruby-identifier">fetch</span>(:<span class="ruby-identifier">none</span>, <span class="ruby-string">&#39;Francesco&#39;</span>)    <span class="ruby-comment"># =&gt; &quot;Francesco&quot;</span>
<span class="ruby-identifier">params</span>.<span class="ruby-identifier">fetch</span>(:<span class="ruby-identifier">none</span>) { <span class="ruby-string">&#39;Francesco&#39;</span> } <span class="ruby-comment"># =&gt; &quot;Francesco&quot;</span>
</pre>
          
          

          
          <div class="method-source-code" id="fetch-source">
            <pre><span class="ruby-comment"># File lib/action_controller/metal/strong_parameters.rb, line 430</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">fetch</span>(<span class="ruby-identifier">key</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
  <span class="ruby-identifier">convert_value_to_parameters</span>(
    <span class="ruby-ivar">@parameters</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-identifier">key</span>) {
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">block_given?</span>
        <span class="ruby-keyword">yield</span>
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">args</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-value">0</span>) { <span class="ruby-identifier">raise</span> <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">ParameterMissing</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">key</span>) }
      <span class="ruby-keyword">end</span>
    }
  )
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-inspect" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">inspect</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="inspect-source">
            <pre><span class="ruby-comment"># File lib/action_controller/metal/strong_parameters.rb, line 598</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">inspect</span>
  <span class="ruby-node">&quot;&lt;#{self.class} #{@parameters} permitted: #{@permitted}&gt;&quot;</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-keep_if" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">keep_if</span><span
            class="method-args">(&block)</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="Parameters.html#method-i-select-21">select!</a>
        </div>
        
      </div>

    
      <div id="method-i-merge" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">merge</span><span
            class="method-args">(other_hash)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns a new <code>ActionController::Parameters</code> with all keys from
<code>other_hash</code> merges into current hash.</p>
          
          

          
          <div class="method-source-code" id="merge-source">
            <pre><span class="ruby-comment"># File lib/action_controller/metal/strong_parameters.rb, line 578</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">merge</span>(<span class="ruby-identifier">other_hash</span>)
  <span class="ruby-identifier">new_instance_with_inherited_permitted_status</span>(
    <span class="ruby-ivar">@parameters</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">other_hash</span>.<span class="ruby-identifier">to_h</span>)
  )
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-merge-21" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">merge!</span><span
            class="method-args">(other_hash)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns current <code>ActionController::Parameters</code> instance which
<code>other_hash</code> merges into current hash.</p>
          
          

          
          <div class="method-source-code" id="merge-21-source">
            <pre><span class="ruby-comment"># File lib/action_controller/metal/strong_parameters.rb, line 586</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">merge!</span>(<span class="ruby-identifier">other_hash</span>)
  <span class="ruby-ivar">@parameters</span>.<span class="ruby-identifier">merge!</span>(<span class="ruby-identifier">other_hash</span>.<span class="ruby-identifier">to_h</span>)
  <span class="ruby-keyword">self</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-method_missing" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">method_missing</span><span
            class="method-args">(method_sym, *args, &block)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          
            <div class="method-calls-super">
              Calls superclass method
              
            </div>
          

          
          <div class="method-source-code" id="method_missing-source">
            <pre><span class="ruby-comment"># File lib/action_controller/metal/strong_parameters.rb, line 633</span>
    <span class="ruby-keyword">def</span> <span class="ruby-identifier">method_missing</span>(<span class="ruby-identifier">method_sym</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@parameters</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">method_sym</span>)
        <span class="ruby-identifier">message</span> = <span class="ruby-string">&quot;          Method #{method_sym} is deprecated and will be removed in Rails 5.1,
          as `ActionController::Parameters` no longer inherits from
          hash. Using this deprecated behavior exposes potential security
          problems. If you continue to use this method you may be creating
          a security vulnerability in your app that can be exploited. Instead,
          consider using one of these documented methods which are not
          deprecated: http://api.rubyonrails.org/v#{ActionPack.version}/classes/ActionController/Parameters.html
&quot;</span>.<span class="ruby-identifier">squish</span>
        <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Deprecation</span>.<span class="ruby-identifier">warn</span>(<span class="ruby-identifier">message</span>)
        <span class="ruby-ivar">@parameters</span>.<span class="ruby-identifier">public_send</span>(<span class="ruby-identifier">method_sym</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-keyword">super</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-permit" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">permit</span><span
            class="method-args">(*filters)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns a new <code>ActionController::Parameters</code> instance that
includes only the given <code>filters</code> and sets the
<code>permitted</code> attribute for the object to <code>true</code>. This
is useful for limiting which attributes should be allowed for mass
updating.</p>

<pre class="ruby"><span class="ruby-identifier">params</span> = <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Parameters</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">user</span><span class="ruby-operator">:</span> { <span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;Francesco&#39;</span>, <span class="ruby-identifier">age</span><span class="ruby-operator">:</span> <span class="ruby-value">22</span>, <span class="ruby-identifier">role</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;admin&#39;</span> })
<span class="ruby-identifier">permitted</span> = <span class="ruby-identifier">params</span>.<span class="ruby-identifier">require</span>(:<span class="ruby-identifier">user</span>).<span class="ruby-identifier">permit</span>(:<span class="ruby-identifier">name</span>, :<span class="ruby-identifier">age</span>)
<span class="ruby-identifier">permitted</span>.<span class="ruby-identifier">permitted?</span>      <span class="ruby-comment"># =&gt; true</span>
<span class="ruby-identifier">permitted</span>.<span class="ruby-identifier">has_key?</span>(:<span class="ruby-identifier">name</span>) <span class="ruby-comment"># =&gt; true</span>
<span class="ruby-identifier">permitted</span>.<span class="ruby-identifier">has_key?</span>(:<span class="ruby-identifier">age</span>)  <span class="ruby-comment"># =&gt; true</span>
<span class="ruby-identifier">permitted</span>.<span class="ruby-identifier">has_key?</span>(:<span class="ruby-identifier">role</span>) <span class="ruby-comment"># =&gt; false</span>
</pre>

<p>Only permitted scalars pass the filter. For example, given</p>

<pre class="ruby"><span class="ruby-identifier">params</span>.<span class="ruby-identifier">permit</span>(:<span class="ruby-identifier">name</span>)
</pre>

<p><code>:name</code> passes if it is a key of <code>params</code> whose
associated value is of type <code>String</code>, <code>Symbol</code>,
<code>NilClass</code>, <code>Numeric</code>, <code>TrueClass</code>,
<code>FalseClass</code>, <code>Date</code>, <code>Time</code>,
<code>DateTime</code>, <code>StringIO</code>, <code>IO</code>,
<code>ActionDispatch::Http::UploadedFile</code> or
<code>Rack::Test::UploadedFile</code>. Otherwise, the key
<code>:name</code> is filtered out.</p>

<p>You may declare that the parameter should be an array of permitted scalars
by mapping it to an empty array:</p>

<pre class="ruby"><span class="ruby-identifier">params</span> = <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Parameters</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">tags</span><span class="ruby-operator">:</span> [<span class="ruby-string">&#39;rails&#39;</span>, <span class="ruby-string">&#39;parameters&#39;</span>])
<span class="ruby-identifier">params</span>.<span class="ruby-identifier">permit</span>(<span class="ruby-identifier">tags</span><span class="ruby-operator">:</span> [])
</pre>

<p>You can also use <code>permit</code> on nested parameters, like:</p>

<pre class="ruby"><span class="ruby-identifier">params</span> = <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Parameters</span>.<span class="ruby-identifier">new</span>({
  <span class="ruby-identifier">person</span><span class="ruby-operator">:</span> {
    <span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;Francesco&#39;</span>,
    <span class="ruby-identifier">age</span><span class="ruby-operator">:</span>  <span class="ruby-value">22</span>,
    <span class="ruby-identifier">pets</span><span class="ruby-operator">:</span> [{
      <span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;Purplish&#39;</span>,
      <span class="ruby-identifier">category</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;dogs&#39;</span>
    }]
  }
})

<span class="ruby-identifier">permitted</span> = <span class="ruby-identifier">params</span>.<span class="ruby-identifier">permit</span>(<span class="ruby-identifier">person</span><span class="ruby-operator">:</span> [ :<span class="ruby-identifier">name</span>, { <span class="ruby-identifier">pets</span><span class="ruby-operator">:</span> :<span class="ruby-identifier">name</span> } ])
<span class="ruby-identifier">permitted</span>.<span class="ruby-identifier">permitted?</span>                    <span class="ruby-comment"># =&gt; true</span>
<span class="ruby-identifier">permitted</span>[:<span class="ruby-identifier">person</span>][:<span class="ruby-identifier">name</span>]               <span class="ruby-comment"># =&gt; &quot;Francesco&quot;</span>
<span class="ruby-identifier">permitted</span>[:<span class="ruby-identifier">person</span>][:<span class="ruby-identifier">age</span>]                <span class="ruby-comment"># =&gt; nil</span>
<span class="ruby-identifier">permitted</span>[:<span class="ruby-identifier">person</span>][:<span class="ruby-identifier">pets</span>][<span class="ruby-value">0</span>][:<span class="ruby-identifier">name</span>]     <span class="ruby-comment"># =&gt; &quot;Purplish&quot;</span>
<span class="ruby-identifier">permitted</span>[:<span class="ruby-identifier">person</span>][:<span class="ruby-identifier">pets</span>][<span class="ruby-value">0</span>][:<span class="ruby-identifier">category</span>] <span class="ruby-comment"># =&gt; nil</span>
</pre>

<p>Note that if you use <code>permit</code> in a key that points to a hash, it
won&#39;t allow all the hash. You also need to specify which attributes
inside the hash should be whitelisted.</p>

<pre class="ruby"><span class="ruby-identifier">params</span> = <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Parameters</span>.<span class="ruby-identifier">new</span>({
  <span class="ruby-identifier">person</span><span class="ruby-operator">:</span> {
    <span class="ruby-identifier">contact</span><span class="ruby-operator">:</span> {
      <span class="ruby-identifier">email</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;none@test.com&#39;</span>,
      <span class="ruby-identifier">phone</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;555-1234&#39;</span>
    }
  }
})

<span class="ruby-identifier">params</span>.<span class="ruby-identifier">require</span>(:<span class="ruby-identifier">person</span>).<span class="ruby-identifier">permit</span>(:<span class="ruby-identifier">contact</span>)
<span class="ruby-comment"># =&gt; {}</span>

<span class="ruby-identifier">params</span>.<span class="ruby-identifier">require</span>(:<span class="ruby-identifier">person</span>).<span class="ruby-identifier">permit</span>(<span class="ruby-identifier">contact</span><span class="ruby-operator">:</span> :<span class="ruby-identifier">phone</span>)
<span class="ruby-comment"># =&gt; {&quot;contact&quot;=&gt;{&quot;phone&quot;=&gt;&quot;555-1234&quot;}}</span>

<span class="ruby-identifier">params</span>.<span class="ruby-identifier">require</span>(:<span class="ruby-identifier">person</span>).<span class="ruby-identifier">permit</span>(<span class="ruby-identifier">contact</span><span class="ruby-operator">:</span> [ :<span class="ruby-identifier">email</span>, :<span class="ruby-identifier">phone</span> ])
<span class="ruby-comment"># =&gt; {&quot;contact&quot;=&gt;{&quot;email&quot;=&gt;&quot;none@test.com&quot;, &quot;phone&quot;=&gt;&quot;555-1234&quot;}}</span>
</pre>
          
          

          
          <div class="method-source-code" id="permit-source">
            <pre><span class="ruby-comment"># File lib/action_controller/metal/strong_parameters.rb, line 386</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">permit</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">filters</span>)
  <span class="ruby-identifier">params</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">new</span>

  <span class="ruby-identifier">filters</span>.<span class="ruby-identifier">flatten</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">filter</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">case</span> <span class="ruby-identifier">filter</span>
    <span class="ruby-keyword">when</span> <span class="ruby-constant">Symbol</span>, <span class="ruby-constant">String</span>
      <span class="ruby-identifier">permitted_scalar_filter</span>(<span class="ruby-identifier">params</span>, <span class="ruby-identifier">filter</span>)
    <span class="ruby-keyword">when</span> <span class="ruby-constant">Hash</span> <span class="ruby-keyword">then</span>
      <span class="ruby-identifier">hash_filter</span>(<span class="ruby-identifier">params</span>, <span class="ruby-identifier">filter</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">unpermitted_parameters!</span>(<span class="ruby-identifier">params</span>) <span class="ruby-keyword">if</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">action_on_unpermitted_parameters</span>

  <span class="ruby-identifier">params</span>.<span class="ruby-identifier">permit!</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-permit-21" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">permit!</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Sets the <code>permitted</code> attribute to <code>true</code>. This can be
used to pass mass assignment. Returns <code>self</code>.</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Person</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">params</span> = <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Parameters</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;Francesco&#39;</span>)
<span class="ruby-identifier">params</span>.<span class="ruby-identifier">permitted?</span>  <span class="ruby-comment"># =&gt; false</span>
<span class="ruby-constant">Person</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">params</span>) <span class="ruby-comment"># =&gt; ActiveModel::ForbiddenAttributesError</span>
<span class="ruby-identifier">params</span>.<span class="ruby-identifier">permit!</span>
<span class="ruby-identifier">params</span>.<span class="ruby-identifier">permitted?</span>  <span class="ruby-comment"># =&gt; true</span>
<span class="ruby-constant">Person</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">params</span>) <span class="ruby-comment"># =&gt; #&lt;Person id: nil, name: &quot;Francesco&quot;&gt;</span>
</pre>
          
          

          
          <div class="method-source-code" id="permit-21-source">
            <pre><span class="ruby-comment"># File lib/action_controller/metal/strong_parameters.rb, line 243</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">permit!</span>
  <span class="ruby-identifier">each_pair</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
    <span class="ruby-constant">Array</span>.<span class="ruby-identifier">wrap</span>(<span class="ruby-identifier">value</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">v</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">v</span>.<span class="ruby-identifier">permit!</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">v</span>.<span class="ruby-identifier">respond_to?</span> <span class="ruby-value">:permit!</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-ivar">@permitted</span> = <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">self</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-permitted-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">permitted?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns <code>true</code> if the parameter is permitted, <code>false</code>
otherwise.</p>

<pre class="ruby"><span class="ruby-identifier">params</span> = <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Parameters</span>.<span class="ruby-identifier">new</span>
<span class="ruby-identifier">params</span>.<span class="ruby-identifier">permitted?</span> <span class="ruby-comment"># =&gt; false</span>
<span class="ruby-identifier">params</span>.<span class="ruby-identifier">permit!</span>
<span class="ruby-identifier">params</span>.<span class="ruby-identifier">permitted?</span> <span class="ruby-comment"># =&gt; true</span>
</pre>
          
          

          
          <div class="method-source-code" id="permitted-3F-source">
            <pre><span class="ruby-comment"># File lib/action_controller/metal/strong_parameters.rb, line 227</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">permitted?</span>
  <span class="ruby-ivar">@permitted</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-reject" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">reject</span><span
            class="method-args">(&block)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns a new instance of <code>ActionController::Parameters</code> with
items that the block evaluates to true removed.</p>
          
          

          
          <div class="method-source-code" id="reject-source">
            <pre><span class="ruby-comment"># File lib/action_controller/metal/strong_parameters.rb, line 559</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">reject</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-identifier">new_instance_with_inherited_permitted_status</span>(<span class="ruby-ivar">@parameters</span>.<span class="ruby-identifier">reject</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>))
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-reject-21" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">reject!</span><span
            class="method-args">(&block)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Removes items that the block evaluates to true and returns self.</p>
          
          

          
          <div class="method-source-code" id="reject-21-source">
            <pre><span class="ruby-comment"># File lib/action_controller/metal/strong_parameters.rb, line 564</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">reject!</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-ivar">@parameters</span>.<span class="ruby-identifier">reject!</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-keyword">self</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="Parameters.html#method-i-delete_if">delete_if</a>
        </div>
        

        
      </div>

    
      <div id="method-i-require" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">require</span><span
            class="method-args">(key)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>This method accepts both a single key and an array of keys.</p>

<p>When passed a single key, if it exists and its associated value is either
present or the singleton <code>false</code>, returns said value:</p>

<pre class="ruby"><span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Parameters</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">person</span><span class="ruby-operator">:</span> { <span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;Francesco&#39;</span> }).<span class="ruby-identifier">require</span>(:<span class="ruby-identifier">person</span>)
<span class="ruby-comment"># =&gt; {&quot;name&quot;=&gt;&quot;Francesco&quot;}</span>
</pre>

<p>Otherwise raises <code>ActionController::ParameterMissing</code>:</p>

<pre class="ruby"><span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Parameters</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">require</span>(:<span class="ruby-identifier">person</span>)
<span class="ruby-comment"># ActionController::ParameterMissing: param is missing or the value is empty: person</span>

<span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Parameters</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">person</span><span class="ruby-operator">:</span> <span class="ruby-keyword">nil</span>).<span class="ruby-identifier">require</span>(:<span class="ruby-identifier">person</span>)
<span class="ruby-comment"># ActionController::ParameterMissing: param is missing or the value is empty: person</span>

<span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Parameters</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">person</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;\t&quot;</span>).<span class="ruby-identifier">require</span>(:<span class="ruby-identifier">person</span>)
<span class="ruby-comment"># ActionController::ParameterMissing: param is missing or the value is empty: person</span>

<span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Parameters</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">person</span><span class="ruby-operator">:</span> {}).<span class="ruby-identifier">require</span>(:<span class="ruby-identifier">person</span>)
<span class="ruby-comment"># ActionController::ParameterMissing: param is missing or the value is empty: person</span>
</pre>

<p>When given an array of keys, the method tries to require each one of them
in order. If it succeeds, an array with the respective return values is
returned:</p>

<pre>params = ActionController::Parameters.new(user: { ... }, profile: { ... })
user_params, profile_params = params.require(:user, :profile)</pre>

<p>Otherwise, the method re-raises the first exception found:</p>

<pre class="ruby"><span class="ruby-identifier">params</span> = <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Parameters</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">user</span><span class="ruby-operator">:</span> {}, <span class="ruby-identifier">profile</span><span class="ruby-operator">:</span> {})
<span class="ruby-identifier">user_params</span>, <span class="ruby-identifier">profile_params</span> = <span class="ruby-identifier">params</span>.<span class="ruby-identifier">require</span>(:<span class="ruby-identifier">user</span>, :<span class="ruby-identifier">profile</span>)
<span class="ruby-comment"># ActionController::ParameterMissing: param is missing or the value is empty: user</span>
</pre>

<p>Technically this method can be used to fetch terminal values:</p>

<pre class="ruby"><span class="ruby-comment"># CAREFUL</span>
<span class="ruby-identifier">params</span> = <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Parameters</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">person</span><span class="ruby-operator">:</span> { <span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;Finn&#39;</span> })
<span class="ruby-identifier">name</span> = <span class="ruby-identifier">params</span>.<span class="ruby-identifier">require</span>(:<span class="ruby-identifier">person</span>).<span class="ruby-identifier">require</span>(:<span class="ruby-identifier">name</span>) <span class="ruby-comment"># CAREFUL</span>
</pre>

<p>but take into account that at some point those ones have to be permitted:</p>

<pre class="ruby"><span class="ruby-keyword">def</span> <span class="ruby-identifier">person_params</span>
  <span class="ruby-identifier">params</span>.<span class="ruby-identifier">require</span>(:<span class="ruby-identifier">person</span>).<span class="ruby-identifier">permit</span>(:<span class="ruby-identifier">name</span>).<span class="ruby-identifier">tap</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">person_params</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">person_params</span>.<span class="ruby-identifier">require</span>(:<span class="ruby-identifier">name</span>) <span class="ruby-comment"># SAFER</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>

<p>for example.</p>
          
          

          
          <div class="method-source-code" id="require-source">
            <pre><span class="ruby-comment"># File lib/action_controller/metal/strong_parameters.rb, line 304</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">require</span>(<span class="ruby-identifier">key</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">key</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">k</span><span class="ruby-operator">|</span> <span class="ruby-identifier">require</span>(<span class="ruby-identifier">k</span>) } <span class="ruby-keyword">if</span> <span class="ruby-identifier">key</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>)
  <span class="ruby-identifier">value</span> = <span class="ruby-keyword">self</span>[<span class="ruby-identifier">key</span>]
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">present?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">value</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">false</span>
    <span class="ruby-identifier">value</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">ParameterMissing</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">key</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="Parameters.html#method-i-required">required</a>
        </div>
        

        
      </div>

    
      <div id="method-i-required" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">required</span><span
            class="method-args">(key)</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Alias of <a href="Parameters.html#method-i-require">require</a>.</p>
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="Parameters.html#method-i-require">require</a>
        </div>
        
      </div>

    
      <div id="method-i-select" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">select</span><span
            class="method-args">(&block)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns a new instance of <code>ActionController::Parameters</code> with
only items that the block evaluates to true.</p>
          
          

          
          <div class="method-source-code" id="select-source">
            <pre><span class="ruby-comment"># File lib/action_controller/metal/strong_parameters.rb, line 546</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">select</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-identifier">new_instance_with_inherited_permitted_status</span>(<span class="ruby-ivar">@parameters</span>.<span class="ruby-identifier">select</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>))
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-select-21" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">select!</span><span
            class="method-args">(&block)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Equivalent to Hash#keep_if, but returns nil if no changes were made.</p>
          
          

          
          <div class="method-source-code" id="select-21-source">
            <pre><span class="ruby-comment"># File lib/action_controller/metal/strong_parameters.rb, line 551</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">select!</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-ivar">@parameters</span>.<span class="ruby-identifier">select!</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-keyword">self</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="Parameters.html#method-i-keep_if">keep_if</a>
        </div>
        

        
      </div>

    
      <div id="method-i-slice" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">slice</span><span
            class="method-args">(*keys)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns a new <code>ActionController::Parameters</code> instance that
includes only the given <code>keys</code>. If the given <code>keys</code>
don&#39;t exist, returns an empty hash.</p>

<pre class="ruby"><span class="ruby-identifier">params</span> = <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Parameters</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">a</span><span class="ruby-operator">:</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">b</span><span class="ruby-operator">:</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">c</span><span class="ruby-operator">:</span> <span class="ruby-value">3</span>)
<span class="ruby-identifier">params</span>.<span class="ruby-identifier">slice</span>(:<span class="ruby-identifier">a</span>, :<span class="ruby-identifier">b</span>) <span class="ruby-comment"># =&gt; {&quot;a&quot;=&gt;1, &quot;b&quot;=&gt;2}</span>
<span class="ruby-identifier">params</span>.<span class="ruby-identifier">slice</span>(:<span class="ruby-identifier">d</span>)     <span class="ruby-comment"># =&gt; {}</span>
</pre>
          
          

          
          <div class="method-source-code" id="slice-source">
            <pre><span class="ruby-comment"># File lib/action_controller/metal/strong_parameters.rb, line 464</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">slice</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">keys</span>)
  <span class="ruby-identifier">new_instance_with_inherited_permitted_status</span>(<span class="ruby-ivar">@parameters</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">keys</span>))
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-slice-21" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">slice!</span><span
            class="method-args">(*keys)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns current <code>ActionController::Parameters</code> instance which
contains only the given <code>keys</code>.</p>
          
          

          
          <div class="method-source-code" id="slice-21-source">
            <pre><span class="ruby-comment"># File lib/action_controller/metal/strong_parameters.rb, line 470</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">slice!</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">keys</span>)
  <span class="ruby-ivar">@parameters</span>.<span class="ruby-identifier">slice!</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">keys</span>)
  <span class="ruby-keyword">self</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-to_h" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">to_h</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns a safe <code>ActiveSupport::HashWithIndifferentAccess</code>
representation of this parameter with all unpermitted keys removed.</p>

<pre class="ruby"><span class="ruby-identifier">params</span> = <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Parameters</span>.<span class="ruby-identifier">new</span>({
  <span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;Senjougahara Hitagi&#39;</span>,
  <span class="ruby-identifier">oddity</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;Heavy stone crab&#39;</span>
})
<span class="ruby-identifier">params</span>.<span class="ruby-identifier">to_h</span> <span class="ruby-comment"># =&gt; {}</span>

<span class="ruby-identifier">safe_params</span> = <span class="ruby-identifier">params</span>.<span class="ruby-identifier">permit</span>(:<span class="ruby-identifier">name</span>)
<span class="ruby-identifier">safe_params</span>.<span class="ruby-identifier">to_h</span> <span class="ruby-comment"># =&gt; {&quot;name&quot;=&gt;&quot;Senjougahara Hitagi&quot;}</span>
</pre>
          
          

          
          <div class="method-source-code" id="to_h-source">
            <pre><span class="ruby-comment"># File lib/action_controller/metal/strong_parameters.rb, line 178</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">to_h</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">permitted?</span>
    <span class="ruby-identifier">convert_parameters_to_hashes</span>(<span class="ruby-ivar">@parameters</span>, <span class="ruby-value">:to_h</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">slice</span>(<span class="ruby-operator">*</span><span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">always_permitted_parameters</span>).<span class="ruby-identifier">permit!</span>.<span class="ruby-identifier">to_h</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-to_unsafe_h" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">to_unsafe_h</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns an unsafe, unfiltered
<code>ActiveSupport::HashWithIndifferentAccess</code> representation of
this parameter.</p>

<pre class="ruby"><span class="ruby-identifier">params</span> = <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Parameters</span>.<span class="ruby-identifier">new</span>({
  <span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;Senjougahara Hitagi&#39;</span>,
  <span class="ruby-identifier">oddity</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;Heavy stone crab&#39;</span>
})
<span class="ruby-identifier">params</span>.<span class="ruby-identifier">to_unsafe_h</span>
<span class="ruby-comment"># =&gt; {&quot;name&quot;=&gt;&quot;Senjougahara Hitagi&quot;, &quot;oddity&quot; =&gt; &quot;Heavy stone crab&quot;}</span>
</pre>
          
          

          
          <div class="method-source-code" id="to_unsafe_h-source">
            <pre><span class="ruby-comment"># File lib/action_controller/metal/strong_parameters.rb, line 196</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">to_unsafe_h</span>
  <span class="ruby-identifier">convert_parameters_to_hashes</span>(<span class="ruby-ivar">@parameters</span>, <span class="ruby-value">:to_unsafe_h</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="Parameters.html#method-i-to_unsafe_hash">to_unsafe_hash</a>
        </div>
        

        
      </div>

    
      <div id="method-i-to_unsafe_hash" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">to_unsafe_hash</span><span
            class="method-args">()</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="Parameters.html#method-i-to_unsafe_h">to_unsafe_h</a>
        </div>
        
      </div>

    
      <div id="method-i-transform_keys" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">transform_keys</span><span
            class="method-args">(&block)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns a new <code>ActionController::Parameters</code> instance with the
results of running <code>block</code> once for every key. The values are
unchanged.</p>
          
          

          
          <div class="method-source-code" id="transform_keys-source">
            <pre><span class="ruby-comment"># File lib/action_controller/metal/strong_parameters.rb, line 519</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">transform_keys</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">block</span>
    <span class="ruby-identifier">new_instance_with_inherited_permitted_status</span>(
      <span class="ruby-ivar">@parameters</span>.<span class="ruby-identifier">transform_keys</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
    )
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@parameters</span>.<span class="ruby-identifier">transform_keys</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-transform_keys-21" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">transform_keys!</span><span
            class="method-args">(&block)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Performs keys transformation and returns the altered
<code>ActionController::Parameters</code> instance.</p>
          
          

          
          <div class="method-source-code" id="transform_keys-21-source">
            <pre><span class="ruby-comment"># File lib/action_controller/metal/strong_parameters.rb, line 531</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">transform_keys!</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-ivar">@parameters</span>.<span class="ruby-identifier">transform_keys!</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-keyword">self</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-transform_values" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">transform_values</span><span
            class="method-args">(&block)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns a new <code>ActionController::Parameters</code> with the results of
running <code>block</code> once for every value. The keys are unchanged.</p>

<pre class="ruby"><span class="ruby-identifier">params</span> = <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Parameters</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">a</span><span class="ruby-operator">:</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">b</span><span class="ruby-operator">:</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">c</span><span class="ruby-operator">:</span> <span class="ruby-value">3</span>)
<span class="ruby-identifier">params</span>.<span class="ruby-identifier">transform_values</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-identifier">x</span> <span class="ruby-operator">*</span> <span class="ruby-value">2</span> }
<span class="ruby-comment"># =&gt; {&quot;a&quot;=&gt;2, &quot;b&quot;=&gt;4, &quot;c&quot;=&gt;6}</span>
</pre>
          
          

          
          <div class="method-source-code" id="transform_values-source">
            <pre><span class="ruby-comment"># File lib/action_controller/metal/strong_parameters.rb, line 500</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">transform_values</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">block</span>
    <span class="ruby-identifier">new_instance_with_inherited_permitted_status</span>(
      <span class="ruby-ivar">@parameters</span>.<span class="ruby-identifier">transform_values</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
    )
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@parameters</span>.<span class="ruby-identifier">transform_values</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-transform_values-21" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">transform_values!</span><span
            class="method-args">(&block)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Performs values transformation and returns the altered
<code>ActionController::Parameters</code> instance.</p>
          
          

          
          <div class="method-source-code" id="transform_values-21-source">
            <pre><span class="ruby-comment"># File lib/action_controller/metal/strong_parameters.rb, line 512</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">transform_values!</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-ivar">@parameters</span>.<span class="ruby-identifier">transform_values!</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-keyword">self</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-values_at" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">values_at</span><span
            class="method-args">(*keys)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns values that were assigned to the given <code>keys</code>. Note that
all the <code>Hash</code> objects will be converted to
<code>ActionController::Parameters</code>.</p>
          
          

          
          <div class="method-source-code" id="values_at-source">
            <pre><span class="ruby-comment"># File lib/action_controller/metal/strong_parameters.rb, line 572</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">values_at</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">keys</span>)
  <span class="ruby-identifier">convert_value_to_parameters</span>(<span class="ruby-ivar">@parameters</span>.<span class="ruby-identifier">values_at</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">keys</span>))
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="protected-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Protected Instance Methods</h3>
       </header>

    
      <div id="method-i-fields_for_style-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">fields_for_style?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="fields_for_style-3F-source">
            <pre><span class="ruby-comment"># File lib/action_controller/metal/strong_parameters.rb, line 665</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">fields_for_style?</span>
  <span class="ruby-ivar">@parameters</span>.<span class="ruby-identifier">all?</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>, <span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-identifier">k</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">/\A-?\d+\z/</span> <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-identifier">v</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">v</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Parameters</span>)) }
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-permitted-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">permitted=</span><span
            class="method-args">(new_permitted)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="permitted-3D-source">
            <pre><span class="ruby-comment"># File lib/action_controller/metal/strong_parameters.rb, line 661</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">permitted=</span>(<span class="ruby-identifier">new_permitted</span>)
  <span class="ruby-ivar">@permitted</span> = <span class="ruby-identifier">new_permitted</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="private-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Private Instance Methods</h3>
       </header>

    
      <div id="method-i-array_of_permitted_scalars-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">array_of_permitted_scalars?</span><span
            class="method-args">(value) { |value| ... }</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="array_of_permitted_scalars-3F-source">
            <pre><span class="ruby-comment"># File lib/action_controller/metal/strong_parameters.rb, line 786</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">array_of_permitted_scalars?</span>(<span class="ruby-identifier">value</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">all?</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">element</span><span class="ruby-operator">|</span> <span class="ruby-identifier">permitted_scalar?</span>(<span class="ruby-identifier">element</span>)}
    <span class="ruby-keyword">yield</span> <span class="ruby-identifier">value</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-convert_hashes_to_parameters" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">convert_hashes_to_parameters</span><span
            class="method-args">(key, value)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="convert_hashes_to_parameters-source">
            <pre><span class="ruby-comment"># File lib/action_controller/metal/strong_parameters.rb, line 691</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">convert_hashes_to_parameters</span>(<span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span>)
  <span class="ruby-identifier">converted</span> = <span class="ruby-identifier">convert_value_to_parameters</span>(<span class="ruby-identifier">value</span>)
  <span class="ruby-ivar">@parameters</span>[<span class="ruby-identifier">key</span>] = <span class="ruby-identifier">converted</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">converted</span>.<span class="ruby-identifier">equal?</span>(<span class="ruby-identifier">value</span>)
  <span class="ruby-identifier">converted</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-convert_parameters_to_hashes" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">convert_parameters_to_hashes</span><span
            class="method-args">(value, using)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="convert_parameters_to_hashes-source">
            <pre><span class="ruby-comment"># File lib/action_controller/metal/strong_parameters.rb, line 676</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">convert_parameters_to_hashes</span>(<span class="ruby-identifier">value</span>, <span class="ruby-identifier">using</span>)
  <span class="ruby-keyword">case</span> <span class="ruby-identifier">value</span>
  <span class="ruby-keyword">when</span> <span class="ruby-constant">Array</span>
    <span class="ruby-identifier">value</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-identifier">convert_parameters_to_hashes</span>(<span class="ruby-identifier">v</span>, <span class="ruby-identifier">using</span>) }
  <span class="ruby-keyword">when</span> <span class="ruby-constant">Hash</span>
    <span class="ruby-identifier">value</span>.<span class="ruby-identifier">transform_values</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">v</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">convert_parameters_to_hashes</span>(<span class="ruby-identifier">v</span>, <span class="ruby-identifier">using</span>)
    <span class="ruby-keyword">end</span>.<span class="ruby-identifier">with_indifferent_access</span>
  <span class="ruby-keyword">when</span> <span class="ruby-constant">Parameters</span>
    <span class="ruby-identifier">value</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">using</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">value</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-convert_value_to_parameters" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">convert_value_to_parameters</span><span
            class="method-args">(value)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="convert_value_to_parameters-source">
            <pre><span class="ruby-comment"># File lib/action_controller/metal/strong_parameters.rb, line 697</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">convert_value_to_parameters</span>(<span class="ruby-identifier">value</span>)
  <span class="ruby-keyword">case</span> <span class="ruby-identifier">value</span>
  <span class="ruby-keyword">when</span> <span class="ruby-constant">Array</span>
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">value</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">converted_arrays</span>.<span class="ruby-identifier">member?</span>(<span class="ruby-identifier">value</span>)
    <span class="ruby-identifier">converted</span> = <span class="ruby-identifier">value</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">_</span><span class="ruby-operator">|</span> <span class="ruby-identifier">convert_value_to_parameters</span>(<span class="ruby-identifier">_</span>) }
    <span class="ruby-identifier">converted_arrays</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">converted</span>
    <span class="ruby-identifier">converted</span>
  <span class="ruby-keyword">when</span> <span class="ruby-constant">Hash</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">value</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">value</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-each_element" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">each_element</span><span
            class="method-args">(object) { |el| ... }</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="each_element-source">
            <pre><span class="ruby-comment"># File lib/action_controller/metal/strong_parameters.rb, line 711</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">each_element</span>(<span class="ruby-identifier">object</span>)
  <span class="ruby-keyword">case</span> <span class="ruby-identifier">object</span>
  <span class="ruby-keyword">when</span> <span class="ruby-constant">Array</span>
    <span class="ruby-identifier">object</span>.<span class="ruby-identifier">grep</span>(<span class="ruby-constant">Parameters</span>).<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">el</span><span class="ruby-operator">|</span> <span class="ruby-keyword">yield</span> <span class="ruby-identifier">el</span> }.<span class="ruby-identifier">compact</span>
  <span class="ruby-keyword">when</span> <span class="ruby-constant">Parameters</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">object</span>.<span class="ruby-identifier">fields_for_style?</span>
      <span class="ruby-identifier">hash</span> = <span class="ruby-identifier">object</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">new</span>
      <span class="ruby-identifier">object</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>,<span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">k</span>] = <span class="ruby-keyword">yield</span> <span class="ruby-identifier">v</span> }
      <span class="ruby-identifier">hash</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-keyword">yield</span> <span class="ruby-identifier">object</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-hash_filter" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">hash_filter</span><span
            class="method-args">(params, filter)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="hash_filter-source">
            <pre><span class="ruby-comment"># File lib/action_controller/metal/strong_parameters.rb, line 797</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">hash_filter</span>(<span class="ruby-identifier">params</span>, <span class="ruby-identifier">filter</span>)
  <span class="ruby-identifier">filter</span> = <span class="ruby-identifier">filter</span>.<span class="ruby-identifier">with_indifferent_access</span>

  <span class="ruby-comment"># Slicing filters out non-declared keys.</span>
  <span class="ruby-identifier">slice</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">filter</span>.<span class="ruby-identifier">keys</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">next</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">value</span>
    <span class="ruby-keyword">next</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">has_key?</span> <span class="ruby-identifier">key</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">filter</span>[<span class="ruby-identifier">key</span>] <span class="ruby-operator">==</span> <span class="ruby-constant">EMPTY_ARRAY</span>
      <span class="ruby-comment"># Declaration { comment_ids: [] }.</span>
      <span class="ruby-identifier">array_of_permitted_scalars?</span>(<span class="ruby-keyword">self</span>[<span class="ruby-identifier">key</span>]) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">val</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">params</span>[<span class="ruby-identifier">key</span>] = <span class="ruby-identifier">val</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">non_scalar?</span>(<span class="ruby-identifier">value</span>)
      <span class="ruby-comment"># Declaration { user: :name } or { user: [:name, :age, { address: ... }] }.</span>
      <span class="ruby-identifier">params</span>[<span class="ruby-identifier">key</span>] = <span class="ruby-identifier">each_element</span>(<span class="ruby-identifier">value</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">element</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">element</span>.<span class="ruby-identifier">permit</span>(<span class="ruby-operator">*</span><span class="ruby-constant">Array</span>.<span class="ruby-identifier">wrap</span>(<span class="ruby-identifier">filter</span>[<span class="ruby-identifier">key</span>]))
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-initialize_copy" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">initialize_copy</span><span
            class="method-args">(source)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          
            <div class="method-calls-super">
              Calls superclass method
              
            </div>
          

          
          <div class="method-source-code" id="initialize_copy-source">
            <pre><span class="ruby-comment"># File lib/action_controller/metal/strong_parameters.rb, line 819</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize_copy</span>(<span class="ruby-identifier">source</span>)
  <span class="ruby-keyword">super</span>
  <span class="ruby-ivar">@parameters</span> = <span class="ruby-ivar">@parameters</span>.<span class="ruby-identifier">dup</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-new_instance_with_inherited_permitted_status" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">new_instance_with_inherited_permitted_status</span><span
            class="method-args">(hash)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="new_instance_with_inherited_permitted_status-source">
            <pre><span class="ruby-comment"># File lib/action_controller/metal/strong_parameters.rb, line 670</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">new_instance_with_inherited_permitted_status</span>(<span class="ruby-identifier">hash</span>)
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">hash</span>).<span class="ruby-identifier">tap</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">new_instance</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">new_instance</span>.<span class="ruby-identifier">permitted</span> = <span class="ruby-ivar">@permitted</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-non_scalar-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">non_scalar?</span><span
            class="method-args">(value)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="non_scalar-3F-source">
            <pre><span class="ruby-comment"># File lib/action_controller/metal/strong_parameters.rb, line 792</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">non_scalar?</span>(<span class="ruby-identifier">value</span>)
  <span class="ruby-identifier">value</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Parameters</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-permitted_scalar-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">permitted_scalar?</span><span
            class="method-args">(value)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="permitted_scalar-3F-source">
            <pre><span class="ruby-comment"># File lib/action_controller/metal/strong_parameters.rb, line 770</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">permitted_scalar?</span>(<span class="ruby-identifier">value</span>)
  <span class="ruby-constant">PERMITTED_SCALAR_TYPES</span>.<span class="ruby-identifier">any?</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">type</span><span class="ruby-operator">|</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-identifier">type</span>)}
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-permitted_scalar_filter" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">permitted_scalar_filter</span><span
            class="method-args">(params, key)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="permitted_scalar_filter-source">
            <pre><span class="ruby-comment"># File lib/action_controller/metal/strong_parameters.rb, line 774</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">permitted_scalar_filter</span>(<span class="ruby-identifier">params</span>, <span class="ruby-identifier">key</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">key</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">permitted_scalar?</span>(<span class="ruby-keyword">self</span>[<span class="ruby-identifier">key</span>])
    <span class="ruby-identifier">params</span>[<span class="ruby-identifier">key</span>] = <span class="ruby-keyword">self</span>[<span class="ruby-identifier">key</span>]
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">keys</span>.<span class="ruby-identifier">grep</span>(<span class="ruby-node">/\A#{Regexp.escape(key)}\(\d+[if]?\)\z/</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">k</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">permitted_scalar?</span>(<span class="ruby-keyword">self</span>[<span class="ruby-identifier">k</span>])
      <span class="ruby-identifier">params</span>[<span class="ruby-identifier">k</span>] = <span class="ruby-keyword">self</span>[<span class="ruby-identifier">k</span>]
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-unpermitted_keys" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">unpermitted_keys</span><span
            class="method-args">(params)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="unpermitted_keys-source">
            <pre><span class="ruby-comment"># File lib/action_controller/metal/strong_parameters.rb, line 739</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">unpermitted_keys</span>(<span class="ruby-identifier">params</span>)
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">keys</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">params</span>.<span class="ruby-identifier">keys</span> <span class="ruby-operator">-</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">always_permitted_parameters</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-unpermitted_parameters-21" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">unpermitted_parameters!</span><span
            class="method-args">(params)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="unpermitted_parameters-21-source">
            <pre><span class="ruby-comment"># File lib/action_controller/metal/strong_parameters.rb, line 726</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">unpermitted_parameters!</span>(<span class="ruby-identifier">params</span>)
  <span class="ruby-identifier">unpermitted_keys</span> = <span class="ruby-identifier">unpermitted_keys</span>(<span class="ruby-identifier">params</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">unpermitted_keys</span>.<span class="ruby-identifier">any?</span>
    <span class="ruby-keyword">case</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">action_on_unpermitted_parameters</span>
    <span class="ruby-keyword">when</span> <span class="ruby-value">:log</span>
      <span class="ruby-identifier">name</span> = <span class="ruby-string">&quot;unpermitted_parameters.action_controller&quot;</span>
      <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Notifications</span>.<span class="ruby-identifier">instrument</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">keys</span><span class="ruby-operator">:</span> <span class="ruby-identifier">unpermitted_keys</span>)
    <span class="ruby-keyword">when</span> <span class="ruby-value">:raise</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">UnpermittedParameters</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">unpermitted_keys</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://docs.seattlerb.org/rdoc/">RDoc</a> 4.3.0.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

