<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>module ActiveRecord::ConnectionAdapters - activerecord-5.0.1 Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../";
</script>

<script src="../js/jquery.js"></script>
<script src="../js/darkfish.js"></script>

<link href="../css/fonts.css" rel="stylesheet">
<link href="../css/rdoc.css" rel="stylesheet">



<body id="top" role="document" class="module">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../table_of_contents.html#pages">Pages</a>
    <a href="../table_of_contents.html#classes">Classes</a>
    <a href="../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    
    
    <div id="extends-section" class="nav-section">
  <h3>Extended With Modules</h3>

  <ul class="link-list">
    
  
    <li><span class="extend">ActiveSupport::Autoload</span>
  
  
  </ul>
</div>

    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li class="calls-super" ><a href="#method-c-new">::new</a>
    
    <li ><a href="#method-i-add_column_sql">#add_column_sql</a>
    
    <li ><a href="#method-i-add_index_length">#add_index_length</a>
    
    <li ><a href="#method-i-add_index_sql">#add_index_sql</a>
    
    <li class="calls-super" ><a href="#method-i-add_options_for_index_columns">#add_options_for_index_columns</a>
    
    <li ><a href="#method-i-add_timestamps_sql">#add_timestamps_sql</a>
    
    <li ><a href="#method-i-begin_db_transaction">#begin_db_transaction</a>
    
    <li ><a href="#method-i-begin_isolated_db_transaction">#begin_isolated_db_transaction</a>
    
    <li ><a href="#method-i-can_perform_case_insensitive_comparison_for-3F">#can_perform_case_insensitive_comparison_for?</a>
    
    <li class="calls-super" ><a href="#method-i-case_sensitive_comparison">#case_sensitive_comparison</a>
    
    <li ><a href="#method-i-change_column_sql">#change_column_sql</a>
    
    <li ><a href="#method-i-charset">#charset</a>
    
    <li ><a href="#method-i-clear_cache-21">#clear_cache!</a>
    
    <li ><a href="#method-i-collation">#collation</a>
    
    <li ><a href="#method-i-configure_connection">#configure_connection</a>
    
    <li ><a href="#method-i-create_database">#create_database</a>
    
    <li ><a href="#method-i-current_database">#current_database</a>
    
    <li ><a href="#method-i-data_source_exists-3F">#data_source_exists?</a>
    
    <li ><a href="#method-i-data_sources">#data_sources</a>
    
    <li ><a href="#method-i-drop_table">#drop_table</a>
    
    <li ><a href="#method-i-empty_insert_statement_value">#empty_insert_statement_value</a>
    
    <li ><a href="#method-i-execute">#execute</a>
    
    <li ><a href="#method-i-explain">#explain</a>
    
    <li class="calls-super" ><a href="#method-i-extract_precision">#extract_precision</a>
    
    <li class="calls-super" ><a href="#method-i-fetch_type_metadata">#fetch_type_metadata</a>
    
    <li ><a href="#method-i-foreign_keys">#foreign_keys</a>
    
    <li ><a href="#method-i-index_algorithms">#index_algorithms</a>
    
    <li ><a href="#method-i-native_database_types">#native_database_types</a>
    
    <li ><a href="#method-i-recreate_database">#recreate_database</a>
    
    <li ><a href="#method-i-remove_column_sql">#remove_column_sql</a>
    
    <li ><a href="#method-i-remove_columns_sql">#remove_columns_sql</a>
    
    <li ><a href="#method-i-remove_index_sql">#remove_index_sql</a>
    
    <li ><a href="#method-i-remove_timestamps_sql">#remove_timestamps_sql</a>
    
    <li ><a href="#method-i-rename_column_sql">#rename_column_sql</a>
    
    <li class="calls-super" ><a href="#method-i-rename_index">#rename_index</a>
    
    <li ><a href="#method-i-rename_table">#rename_table</a>
    
    <li ><a href="#method-i-show_variable">#show_variable</a>
    
    <li ><a href="#method-i-strict_mode-3F">#strict_mode?</a>
    
    <li ><a href="#method-i-subquery_for">#subquery_for</a>
    
    <li ><a href="#method-i-supports_advisory_locks-3F">#supports_advisory_locks?</a>
    
    <li ><a href="#method-i-supports_datetime_with_precision-3F">#supports_datetime_with_precision?</a>
    
    <li ><a href="#method-i-supports_explain-3F">#supports_explain?</a>
    
    <li ><a href="#method-i-supports_foreign_keys-3F">#supports_foreign_keys?</a>
    
    <li ><a href="#method-i-supports_index_sort_order-3F">#supports_index_sort_order?</a>
    
    <li ><a href="#method-i-supports_indexes_in_create-3F">#supports_indexes_in_create?</a>
    
    <li ><a href="#method-i-supports_migrations-3F">#supports_migrations?</a>
    
    <li ><a href="#method-i-supports_primary_key-3F">#supports_primary_key?</a>
    
    <li ><a href="#method-i-supports_rename_index-3F">#supports_rename_index?</a>
    
    <li ><a href="#method-i-supports_statement_cache-3F">#supports_statement_cache?</a>
    
    <li ><a href="#method-i-supports_transaction_isolation-3F">#supports_transaction_isolation?</a>
    
    <li ><a href="#method-i-supports_views-3F">#supports_views?</a>
    
    <li ><a href="#method-i-table_exists-3F">#table_exists?</a>
    
    <li class="calls-super" ><a href="#method-i-translate_exception">#translate_exception</a>
    
    <li ><a href="#method-i-truncate">#truncate</a>
    
    <li class="calls-super" ><a href="#method-i-type_to_sql">#type_to_sql</a>
    
    <li ><a href="#method-i-valid_type-3F">#valid_type?</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="module-ActiveRecord::ConnectionAdapters">
  <h1 id="module-ActiveRecord::ConnectionAdapters" class="module">
    module ActiveRecord::ConnectionAdapters
  </h1>

  <section class="description">
    
  </section>

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    
    <section class="constants-list">
      <header>
        <h3>Constants</h3>
      </header>
      <dl>
      
        <dt id="CHARSETS_OF_4BYTES_MAXLEN">CHARSETS_OF_4BYTES_MAXLEN
        
        <dd>
        
      
      </dl>
    </section>
    

    

    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Class Methods</h3>
       </header>

    
      <div id="method-c-new" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">new</span><span
            class="method-args">(connection, logger, connection_options, config)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          
            <div class="method-calls-super">
              Calls superclass method
              
            </div>
          

          
          <div class="method-source-code" id="new-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 65</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">connection</span>, <span class="ruby-identifier">logger</span>, <span class="ruby-identifier">connection_options</span>, <span class="ruby-identifier">config</span>)
  <span class="ruby-keyword">super</span>(<span class="ruby-identifier">connection</span>, <span class="ruby-identifier">logger</span>, <span class="ruby-identifier">config</span>)

  <span class="ruby-ivar">@statements</span> = <span class="ruby-constant">StatementPool</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">type_cast_config_to_integer</span>(<span class="ruby-identifier">config</span>[<span class="ruby-value">:statement_limit</span>]))

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">version</span> <span class="ruby-operator">&lt;</span> <span class="ruby-string">&#39;5.0.0&#39;</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-node">&quot;Your version of MySQL (#{full_version.match(/^\d+\.\d+\.\d+/)[0]}) is too old. Active Record supports MySQL &gt;= 5.0.&quot;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

    
      <div id="method-i-begin_db_transaction" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">begin_db_transaction</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="begin_db_transaction-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 228</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">begin_db_transaction</span>
  <span class="ruby-identifier">execute</span> <span class="ruby-string">&quot;BEGIN&quot;</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-begin_isolated_db_transaction" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">begin_isolated_db_transaction</span><span
            class="method-args">(isolation)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="begin_isolated_db_transaction-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 232</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">begin_isolated_db_transaction</span>(<span class="ruby-identifier">isolation</span>)
  <span class="ruby-identifier">execute</span> <span class="ruby-node">&quot;SET TRANSACTION ISOLATION LEVEL #{transaction_isolation_levels.fetch(isolation)}&quot;</span>
  <span class="ruby-identifier">begin_db_transaction</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-case_sensitive_comparison" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">case_sensitive_comparison</span><span
            class="method-args">(table, attribute, column, value)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          
            <div class="method-calls-super">
              Calls superclass method
              
            </div>
          

          
          <div class="method-source-code" id="case_sensitive_comparison-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 615</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">case_sensitive_comparison</span>(<span class="ruby-identifier">table</span>, <span class="ruby-identifier">attribute</span>, <span class="ruby-identifier">column</span>, <span class="ruby-identifier">value</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">value</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">column</span>.<span class="ruby-identifier">collation</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">column</span>.<span class="ruby-identifier">case_sensitive?</span>
    <span class="ruby-identifier">table</span>[<span class="ruby-identifier">attribute</span>].<span class="ruby-identifier">eq</span>(<span class="ruby-constant">Arel</span><span class="ruby-operator">::</span><span class="ruby-constant">Nodes</span><span class="ruby-operator">::</span><span class="ruby-constant">Bin</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">Arel</span><span class="ruby-operator">::</span><span class="ruby-constant">Nodes</span><span class="ruby-operator">::</span><span class="ruby-constant">BindParam</span>.<span class="ruby-identifier">new</span>))
  <span class="ruby-keyword">else</span>
    <span class="ruby-keyword">super</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-charset" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">charset</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the database character set.</p>
          
          

          
          <div class="method-source-code" id="charset-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 300</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">charset</span>
  <span class="ruby-identifier">show_variable</span> <span class="ruby-string">&#39;character_set_database&#39;</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-clear_cache-21" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">clear_cache!</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Clears the prepared statements cache.</p>
          
          

          
          <div class="method-source-code" id="clear_cache-21-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 198</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">clear_cache!</span>
  <span class="ruby-identifier">reload_type_map</span>
  <span class="ruby-ivar">@statements</span>.<span class="ruby-identifier">clear</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-collation" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">collation</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the database collation strategy.</p>
          
          

          
          <div class="method-source-code" id="collation-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 305</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">collation</span>
  <span class="ruby-identifier">show_variable</span> <span class="ruby-string">&#39;collation_database&#39;</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-create_database" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">create_database</span><span
            class="method-args">(name, options = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Create a new <a href="ConnectionAdapters/MySQL.html">MySQL</a> database
with optional <code>:charset</code> and <code>:collation</code>. Charset
defaults to utf8.</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">create_database</span> <span class="ruby-string">&#39;charset_test&#39;</span>, <span class="ruby-identifier">charset</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;latin1&#39;</span>, <span class="ruby-identifier">collation</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;latin1_bin&#39;</span>
<span class="ruby-identifier">create_database</span> <span class="ruby-string">&#39;matt_development&#39;</span>
<span class="ruby-identifier">create_database</span> <span class="ruby-string">&#39;matt_development&#39;</span>, <span class="ruby-identifier">charset</span><span class="ruby-operator">:</span> :<span class="ruby-identifier">big5</span>
</pre>
          
          

          
          <div class="method-source-code" id="create_database-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 279</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">create_database</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:collation</span>]
    <span class="ruby-identifier">execute</span> <span class="ruby-node">&quot;CREATE DATABASE #{quote_table_name(name)} DEFAULT CHARACTER SET #{quote_table_name(options[:charset] || &#39;utf8&#39;)} COLLATE #{quote_table_name(options[:collation])}&quot;</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">execute</span> <span class="ruby-node">&quot;CREATE DATABASE #{quote_table_name(name)} DEFAULT CHARACTER SET #{quote_table_name(options[:charset] || &#39;utf8&#39;)}&quot;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-current_database" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">current_database</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="current_database-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 295</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">current_database</span>
  <span class="ruby-identifier">select_value</span> <span class="ruby-string">&#39;SELECT DATABASE() as db&#39;</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-data_source_exists-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">data_source_exists?</span><span
            class="method-args">(table_name)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="data_source_exists-3F-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 347</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">data_source_exists?</span>(<span class="ruby-identifier">table_name</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">table_name</span>.<span class="ruby-identifier">present?</span>

  <span class="ruby-identifier">schema</span>, <span class="ruby-identifier">name</span> = <span class="ruby-identifier">extract_schema_qualified_name</span>(<span class="ruby-identifier">table_name</span>)

  <span class="ruby-identifier">sql</span> = <span class="ruby-string">&quot;SELECT table_name FROM information_schema.tables &quot;</span>
  <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;WHERE table_schema = #{quote(schema)} AND table_name = #{quote(name)}&quot;</span>

  <span class="ruby-identifier">select_values</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-string">&#39;SCHEMA&#39;</span>).<span class="ruby-identifier">any?</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-data_sources" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">data_sources</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="data_sources-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 325</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">data_sources</span>
  <span class="ruby-identifier">sql</span> = <span class="ruby-string">&quot;SELECT table_name FROM information_schema.tables &quot;</span>
  <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;WHERE table_schema = #{quote(@config[:database])}&quot;</span>

  <span class="ruby-identifier">select_values</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-string">&#39;SCHEMA&#39;</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-drop_table" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">drop_table</span><span
            class="method-args">(table_name, options = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Drops a table from the database.</p>
<dl class="rdoc-list label-list"><dt><code>:force</code>
<dd>
<p>Set to <code>:cascade</code> to drop dependent objects as well. Defaults to
false.</p>
</dd><dt><code>:if_exists</code>
<dd>
<p>Set to <code>true</code> to only drop the table if it exists. Defaults to
false.</p>
</dd><dt><code>:temporary</code>
<dd>
<p>Set to <code>true</code> to drop temporary table. Defaults to false.</p>
</dd></dl>

<p>Although this command ignores most <code>options</code> and the block if
one is given, it can be helpful to provide these in a migration&#39;s
<code>change</code> method so it can be reverted. In that case,
<code>options</code> and the block will be used by create_table.</p>
          
          

          
          <div class="method-source-code" id="drop_table-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 465</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">drop_table</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">execute</span> <span class="ruby-node">&quot;DROP#{&#39; TEMPORARY&#39; if options[:temporary]} TABLE#{&#39; IF EXISTS&#39; if options[:if_exists]} #{quote_table_name(table_name)}#{&#39; CASCADE&#39; if options[:force] == :cascade}&quot;</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-empty_insert_statement_value" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">empty_insert_statement_value</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="empty_insert_statement_value-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 257</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">empty_insert_statement_value</span>
  <span class="ruby-string">&quot;VALUES ()&quot;</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-execute" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">execute</span><span
            class="method-args">(sql, name = nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Executes the SQL statement in the context of this connection.</p>
          
          

          
          <div class="method-source-code" id="execute-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 217</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">execute</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">name</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">log</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">name</span>) { <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">query</span>(<span class="ruby-identifier">sql</span>) }
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-explain" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">explain</span><span
            class="method-args">(arel, binds = [])</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="explain-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 207</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">explain</span>(<span class="ruby-identifier">arel</span>, <span class="ruby-identifier">binds</span> = [])
  <span class="ruby-identifier">sql</span>     = <span class="ruby-node">&quot;EXPLAIN #{to_sql(arel, binds)}&quot;</span>
  <span class="ruby-identifier">start</span>   = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>
  <span class="ruby-identifier">result</span>  = <span class="ruby-identifier">exec_query</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-string">&#39;EXPLAIN&#39;</span>, <span class="ruby-identifier">binds</span>)
  <span class="ruby-identifier">elapsed</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">start</span>

  <span class="ruby-constant">MySQL</span><span class="ruby-operator">::</span><span class="ruby-constant">ExplainPrettyPrinter</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">pp</span>(<span class="ruby-identifier">result</span>, <span class="ruby-identifier">elapsed</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-foreign_keys" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">foreign_keys</span><span
            class="method-args">(table_name)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="foreign_keys-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 515</span>
      <span class="ruby-keyword">def</span> <span class="ruby-identifier">foreign_keys</span>(<span class="ruby-identifier">table_name</span>)
        <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">table_name</span>.<span class="ruby-identifier">present?</span>

        <span class="ruby-identifier">schema</span>, <span class="ruby-identifier">name</span> = <span class="ruby-identifier">extract_schema_qualified_name</span>(<span class="ruby-identifier">table_name</span>)

        <span class="ruby-identifier">fk_info</span> = <span class="ruby-identifier">select_all</span>(<span class="ruby-string">&quot;          SELECT fk.referenced_table_name AS &#39;to_table&#39;,
                 fk.referenced_column_name AS &#39;primary_key&#39;,
                 fk.column_name AS &#39;column&#39;,
                 fk.constraint_name AS &#39;name&#39;,
                 rc.update_rule AS &#39;on_update&#39;,
                 rc.delete_rule AS &#39;on_delete&#39;
          FROM information_schema.key_column_usage fk
          JOIN information_schema.referential_constraints rc
          USING (constraint_schema, constraint_name)
          WHERE fk.referenced_column_name IS NOT NULL
            AND fk.table_schema = #{quote(schema)}
            AND fk.table_name = #{quote(name)}
&quot;</span>.<span class="ruby-identifier">strip_heredoc</span>, <span class="ruby-string">&#39;SCHEMA&#39;</span>)

        <span class="ruby-identifier">fk_info</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">row</span><span class="ruby-operator">|</span>
          <span class="ruby-identifier">options</span> = {
            <span class="ruby-identifier">column</span><span class="ruby-operator">:</span> <span class="ruby-identifier">row</span>[<span class="ruby-string">&#39;column&#39;</span>],
            <span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-identifier">row</span>[<span class="ruby-string">&#39;name&#39;</span>],
            <span class="ruby-identifier">primary_key</span><span class="ruby-operator">:</span> <span class="ruby-identifier">row</span>[<span class="ruby-string">&#39;primary_key&#39;</span>]
          }

          <span class="ruby-identifier">options</span>[<span class="ruby-value">:on_update</span>] = <span class="ruby-identifier">extract_foreign_key_action</span>(<span class="ruby-identifier">row</span>[<span class="ruby-string">&#39;on_update&#39;</span>])
          <span class="ruby-identifier">options</span>[<span class="ruby-value">:on_delete</span>] = <span class="ruby-identifier">extract_foreign_key_action</span>(<span class="ruby-identifier">row</span>[<span class="ruby-string">&#39;on_delete&#39;</span>])

          <span class="ruby-constant">ForeignKeyDefinition</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">row</span>[<span class="ruby-string">&#39;to_table&#39;</span>], <span class="ruby-identifier">options</span>)
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-index_algorithms" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">index_algorithms</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="index_algorithms-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 160</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">index_algorithms</span>
  { <span class="ruby-identifier">default</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;ALGORITHM = DEFAULT&#39;</span>, <span class="ruby-identifier">copy</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;ALGORITHM = COPY&#39;</span>, <span class="ruby-identifier">inplace</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;ALGORITHM = INPLACE&#39;</span> }
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-native_database_types" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">native_database_types</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="native_database_types-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 156</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">native_database_types</span>
  <span class="ruby-constant">NATIVE_DATABASE_TYPES</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-recreate_database" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">recreate_database</span><span
            class="method-args">(name, options = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Drops the database specified on the <code>name</code> attribute and creates
it again using the provided <code>options</code>.</p>
          
          

          
          <div class="method-source-code" id="recreate_database-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 265</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">recreate_database</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">drop_database</span>(<span class="ruby-identifier">name</span>)
  <span class="ruby-identifier">sql</span> = <span class="ruby-identifier">create_database</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">options</span>)
  <span class="ruby-identifier">reconnect!</span>
  <span class="ruby-identifier">sql</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-rename_index" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">rename_index</span><span
            class="method-args">(table_name, old_name, new_name)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          
            <div class="method-calls-super">
              Calls superclass method
              
            </div>
          

          
          <div class="method-source-code" id="rename_index-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 469</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">rename_index</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">old_name</span>, <span class="ruby-identifier">new_name</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">supports_rename_index?</span>
    <span class="ruby-identifier">validate_index_length!</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">new_name</span>)

    <span class="ruby-identifier">execute</span> <span class="ruby-node">&quot;ALTER TABLE #{quote_table_name(table_name)} RENAME INDEX #{quote_table_name(old_name)} TO #{quote_table_name(new_name)}&quot;</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-keyword">super</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-rename_table" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">rename_table</span><span
            class="method-args">(table_name, new_name)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Renames a table.</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">rename_table</span>(<span class="ruby-string">&#39;octopuses&#39;</span>, <span class="ruby-string">&#39;octopi&#39;</span>)
</pre>
          
          

          
          <div class="method-source-code" id="rename_table-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 445</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">rename_table</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">new_name</span>)
  <span class="ruby-identifier">execute</span> <span class="ruby-node">&quot;RENAME TABLE #{quote_table_name(table_name)} TO #{quote_table_name(new_name)}&quot;</span>
  <span class="ruby-identifier">rename_table_indexes</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">new_name</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-show_variable" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">show_variable</span><span
            class="method-args">(name)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>SHOW VARIABLES LIKE &#39;name&#39;</p>
          
          

          
          <div class="method-source-code" id="show_variable-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 594</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">show_variable</span>(<span class="ruby-identifier">name</span>)
  <span class="ruby-identifier">select_value</span>(<span class="ruby-node">&quot;SELECT @@#{name}&quot;</span>, <span class="ruby-string">&#39;SCHEMA&#39;</span>)
<span class="ruby-keyword">rescue</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">StatementInvalid</span>
  <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-strict_mode-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">strict_mode?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="strict_mode-3F-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 643</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">strict_mode?</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">type_cast_config_to_boolean</span>(<span class="ruby-ivar">@config</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-value">:strict</span>, <span class="ruby-keyword">true</span>))
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-supports_advisory_locks-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">supports_advisory_locks?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="supports_advisory_locks-3F-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 144</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">supports_advisory_locks?</span>
  <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-supports_datetime_with_precision-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">supports_datetime_with_precision?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="supports_datetime_with_precision-3F-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 136</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">supports_datetime_with_precision?</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">mariadb?</span>
    <span class="ruby-identifier">version</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-string">&#39;5.3.0&#39;</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">version</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-string">&#39;5.6.4&#39;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-supports_explain-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">supports_explain?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="supports_explain-3F-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 120</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">supports_explain?</span>
  <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-supports_foreign_keys-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">supports_foreign_keys?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="supports_foreign_keys-3F-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 128</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">supports_foreign_keys?</span>
  <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-supports_index_sort_order-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">supports_index_sort_order?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Technically <a href="ConnectionAdapters/MySQL.html">MySQL</a> allows to
create indexes with the sort order syntax but at the moment (5.5) it
doesn&#39;t yet implement them</p>
          
          

          
          <div class="method-source-code" id="supports_index_sort_order-3F-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 112</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">supports_index_sort_order?</span>
  <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-supports_indexes_in_create-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">supports_indexes_in_create?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="supports_indexes_in_create-3F-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 124</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">supports_indexes_in_create?</span>
  <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-supports_migrations-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">supports_migrations?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns true, since this connection adapter supports migrations.</p>
          
          

          
          <div class="method-source-code" id="supports_migrations-3F-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 92</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">supports_migrations?</span>
  <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-supports_primary_key-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">supports_primary_key?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="supports_primary_key-3F-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 96</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">supports_primary_key?</span>
  <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-supports_statement_cache-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">supports_statement_cache?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns true, since this connection adapter supports prepared statement
caching.</p>
          
          

          
          <div class="method-source-code" id="supports_statement_cache-3F-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 106</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">supports_statement_cache?</span>
  <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-supports_transaction_isolation-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">supports_transaction_isolation?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="supports_transaction_isolation-3F-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 116</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">supports_transaction_isolation?</span>
  <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-supports_views-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">supports_views?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="supports_views-3F-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 132</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">supports_views?</span>
  <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-table_exists-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">table_exists?</span><span
            class="method-args">(table_name)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="table_exists-3F-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 336</span>
      <span class="ruby-keyword">def</span> <span class="ruby-identifier">table_exists?</span>(<span class="ruby-identifier">table_name</span>)
        <span class="ruby-comment"># Update lib/active_record/internal_metadata.rb when this gets removed</span>
        <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Deprecation</span>.<span class="ruby-identifier">warn</span>(<span class="ruby-string">&quot;          #table_exists? currently checks both tables and views.
          This behavior is deprecated and will be changed with Rails 5.1 to only check tables.
          Use #data_source_exists? instead.
&quot;</span>.<span class="ruby-identifier">squish</span>)

        <span class="ruby-identifier">data_source_exists?</span>(<span class="ruby-identifier">table_name</span>)
      <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-truncate" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">truncate</span><span
            class="method-args">(table_name, name = nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="truncate-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 332</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">truncate</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">name</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">execute</span> <span class="ruby-node">&quot;TRUNCATE TABLE #{quote_table_name(table_name)}&quot;</span>, <span class="ruby-identifier">name</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-type_to_sql" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">type_to_sql</span><span
            class="method-args">(type, limit = nil, precision = nil, scale = nil, unsigned = nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Maps logical Rails types to MySQL-specific data types.</p>
          
          
            <div class="method-calls-super">
              Calls superclass method
              
            </div>
          

          
          <div class="method-source-code" id="type_to_sql-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 571</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">type_to_sql</span>(<span class="ruby-identifier">type</span>, <span class="ruby-identifier">limit</span> = <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">precision</span> = <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">scale</span> = <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">unsigned</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">sql</span> = <span class="ruby-keyword">case</span> <span class="ruby-identifier">type</span>.<span class="ruby-identifier">to_s</span>
  <span class="ruby-keyword">when</span> <span class="ruby-string">&#39;integer&#39;</span>
    <span class="ruby-identifier">integer_to_sql</span>(<span class="ruby-identifier">limit</span>)
  <span class="ruby-keyword">when</span> <span class="ruby-string">&#39;text&#39;</span>
    <span class="ruby-identifier">text_to_sql</span>(<span class="ruby-identifier">limit</span>)
  <span class="ruby-keyword">when</span> <span class="ruby-string">&#39;blob&#39;</span>
    <span class="ruby-identifier">binary_to_sql</span>(<span class="ruby-identifier">limit</span>)
  <span class="ruby-keyword">when</span> <span class="ruby-string">&#39;binary&#39;</span>
    <span class="ruby-keyword">if</span> (<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">0xfff</span>) <span class="ruby-operator">===</span> <span class="ruby-identifier">limit</span>
      <span class="ruby-node">&quot;varbinary(#{limit})&quot;</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">binary_to_sql</span>(<span class="ruby-identifier">limit</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-keyword">super</span>(<span class="ruby-identifier">type</span>, <span class="ruby-identifier">limit</span>, <span class="ruby-identifier">precision</span>, <span class="ruby-identifier">scale</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&#39; unsigned&#39;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">unsigned</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">type</span> <span class="ruby-operator">!=</span> <span class="ruby-value">:primary_key</span>
  <span class="ruby-identifier">sql</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-valid_type-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">valid_type?</span><span
            class="method-args">(type)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="valid_type-3F-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 647</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">valid_type?</span>(<span class="ruby-identifier">type</span>)
  <span class="ruby-operator">!</span><span class="ruby-identifier">native_database_types</span>[<span class="ruby-identifier">type</span>].<span class="ruby-identifier">nil?</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="protected-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Protected Instance Methods</h3>
       </header>

    
      <div id="method-i-add_column_sql" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">add_column_sql</span><span
            class="method-args">(table_name, column_name, type, options = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="add_column_sql-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 747</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">add_column_sql</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">column_name</span>, <span class="ruby-identifier">type</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">td</span> = <span class="ruby-identifier">create_table_definition</span>(<span class="ruby-identifier">table_name</span>)
  <span class="ruby-identifier">cd</span> = <span class="ruby-identifier">td</span>.<span class="ruby-identifier">new_column_definition</span>(<span class="ruby-identifier">column_name</span>, <span class="ruby-identifier">type</span>, <span class="ruby-identifier">options</span>)
  <span class="ruby-identifier">schema_creation</span>.<span class="ruby-identifier">accept</span>(<span class="ruby-constant">AddColumnDefinition</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">cd</span>))
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-add_index_length" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">add_index_length</span><span
            class="method-args">(quoted_columns, **options)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="add_index_length-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 715</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">add_index_length</span>(<span class="ruby-identifier">quoted_columns</span>, <span class="ruby-operator">**</span><span class="ruby-identifier">options</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">length</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:length</span>]
    <span class="ruby-keyword">case</span> <span class="ruby-identifier">length</span>
    <span class="ruby-keyword">when</span> <span class="ruby-constant">Hash</span>
      <span class="ruby-identifier">length</span> = <span class="ruby-identifier">length</span>.<span class="ruby-identifier">symbolize_keys</span>
      <span class="ruby-identifier">quoted_columns</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">name</span>, <span class="ruby-identifier">column</span><span class="ruby-operator">|</span> <span class="ruby-identifier">column</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;(#{length[name]})&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">length</span>[<span class="ruby-identifier">name</span>].<span class="ruby-identifier">present?</span> }
    <span class="ruby-keyword">when</span> <span class="ruby-constant">Integer</span>
      <span class="ruby-identifier">quoted_columns</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">name</span>, <span class="ruby-identifier">column</span><span class="ruby-operator">|</span> <span class="ruby-identifier">column</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;(#{length})&quot;</span> }
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">quoted_columns</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-add_index_sql" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">add_index_sql</span><span
            class="method-args">(table_name, column_name, options = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="add_index_sql-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 791</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">add_index_sql</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">column_name</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">index_name</span>, <span class="ruby-identifier">index_type</span>, <span class="ruby-identifier">index_columns</span>, <span class="ruby-identifier">_</span>, <span class="ruby-identifier">index_algorithm</span>, <span class="ruby-identifier">index_using</span> = <span class="ruby-identifier">add_index_options</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">column_name</span>, <span class="ruby-identifier">options</span>)
  <span class="ruby-identifier">index_algorithm</span>[<span class="ruby-value">0</span>, <span class="ruby-value">0</span>] = <span class="ruby-string">&quot;, &quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">index_algorithm</span>.<span class="ruby-identifier">present?</span>
  <span class="ruby-node">&quot;ADD #{index_type} INDEX #{quote_column_name(index_name)} #{index_using} (#{index_columns})#{index_algorithm}&quot;</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-add_options_for_index_columns" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">add_options_for_index_columns</span><span
            class="method-args">(quoted_columns, **options)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          
            <div class="method-calls-super">
              Calls superclass method
              
            </div>
          

          
          <div class="method-source-code" id="add_options_for_index_columns-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 729</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">add_options_for_index_columns</span>(<span class="ruby-identifier">quoted_columns</span>, <span class="ruby-operator">**</span><span class="ruby-identifier">options</span>)
  <span class="ruby-identifier">quoted_columns</span> = <span class="ruby-identifier">add_index_length</span>(<span class="ruby-identifier">quoted_columns</span>, <span class="ruby-identifier">options</span>)
  <span class="ruby-keyword">super</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-add_timestamps_sql" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">add_timestamps_sql</span><span
            class="method-args">(table_name, options = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="add_timestamps_sql-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 802</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">add_timestamps_sql</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">options</span> = {})
  [<span class="ruby-identifier">add_column_sql</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-value">:created_at</span>, <span class="ruby-value">:datetime</span>, <span class="ruby-identifier">options</span>), <span class="ruby-identifier">add_column_sql</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-value">:updated_at</span>, <span class="ruby-value">:datetime</span>, <span class="ruby-identifier">options</span>)]
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-change_column_sql" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">change_column_sql</span><span
            class="method-args">(table_name, column_name, type, options = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="change_column_sql-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 753</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">change_column_sql</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">column_name</span>, <span class="ruby-identifier">type</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">column</span> = <span class="ruby-identifier">column_for</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">column_name</span>)

  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">options_include_default?</span>(<span class="ruby-identifier">options</span>)
    <span class="ruby-identifier">options</span>[<span class="ruby-value">:default</span>] = <span class="ruby-identifier">column</span>.<span class="ruby-identifier">default</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-value">:null</span>)
    <span class="ruby-identifier">options</span>[<span class="ruby-value">:null</span>] = <span class="ruby-identifier">column</span>.<span class="ruby-identifier">null</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">td</span> = <span class="ruby-identifier">create_table_definition</span>(<span class="ruby-identifier">table_name</span>)
  <span class="ruby-identifier">cd</span> = <span class="ruby-identifier">td</span>.<span class="ruby-identifier">new_column_definition</span>(<span class="ruby-identifier">column</span>.<span class="ruby-identifier">name</span>, <span class="ruby-identifier">type</span>, <span class="ruby-identifier">options</span>)
  <span class="ruby-identifier">schema_creation</span>.<span class="ruby-identifier">accept</span>(<span class="ruby-constant">ChangeColumnDefinition</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">cd</span>, <span class="ruby-identifier">column</span>.<span class="ruby-identifier">name</span>))
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-extract_precision" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">extract_precision</span><span
            class="method-args">(sql_type)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          
            <div class="method-calls-super">
              Calls superclass method
              
            </div>
          

          
          <div class="method-source-code" id="extract_precision-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 703</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">extract_precision</span>(<span class="ruby-identifier">sql_type</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-regexp">/time/</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">sql_type</span>
    <span class="ruby-keyword">super</span> <span class="ruby-operator">||</span> <span class="ruby-value">0</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-keyword">super</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-fetch_type_metadata" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">fetch_type_metadata</span><span
            class="method-args">(sql_type, extra = "")</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          
            <div class="method-calls-super">
              Calls superclass method
              
            </div>
          

          
          <div class="method-source-code" id="fetch_type_metadata-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 711</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">fetch_type_metadata</span>(<span class="ruby-identifier">sql_type</span>, <span class="ruby-identifier">extra</span> = <span class="ruby-string">&quot;&quot;</span>)
  <span class="ruby-constant">MySQL</span><span class="ruby-operator">::</span><span class="ruby-constant">TypeMetadata</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword">super</span>(<span class="ruby-identifier">sql_type</span>), <span class="ruby-identifier">extra</span><span class="ruby-operator">:</span> <span class="ruby-identifier">extra</span>, <span class="ruby-identifier">strict</span><span class="ruby-operator">:</span> <span class="ruby-identifier">strict_mode?</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-remove_column_sql" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">remove_column_sql</span><span
            class="method-args">(table_name, column_name, type = nil, options = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="remove_column_sql-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 783</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">remove_column_sql</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">column_name</span>, <span class="ruby-identifier">type</span> = <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-node">&quot;DROP #{quote_column_name(column_name)}&quot;</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-remove_columns_sql" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">remove_columns_sql</span><span
            class="method-args">(table_name, *column_names)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="remove_columns_sql-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 787</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">remove_columns_sql</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">column_names</span>)
  <span class="ruby-identifier">column_names</span>.<span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">column_name</span><span class="ruby-operator">|</span> <span class="ruby-identifier">remove_column_sql</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">column_name</span>) }
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-remove_index_sql" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">remove_index_sql</span><span
            class="method-args">(table_name, options = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="remove_index_sql-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 797</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">remove_index_sql</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">index_name</span> = <span class="ruby-identifier">index_name_for_remove</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">options</span>)
  <span class="ruby-node">&quot;DROP INDEX #{index_name}&quot;</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-remove_timestamps_sql" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">remove_timestamps_sql</span><span
            class="method-args">(table_name, options = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="remove_timestamps_sql-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 806</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">remove_timestamps_sql</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">options</span> = {})
  [<span class="ruby-identifier">remove_column_sql</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-value">:updated_at</span>), <span class="ruby-identifier">remove_column_sql</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-value">:created_at</span>)]
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-rename_column_sql" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">rename_column_sql</span><span
            class="method-args">(table_name, column_name, new_column_name)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="rename_column_sql-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 769</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">rename_column_sql</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">column_name</span>, <span class="ruby-identifier">new_column_name</span>)
  <span class="ruby-identifier">column</span>  = <span class="ruby-identifier">column_for</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">column_name</span>)
  <span class="ruby-identifier">options</span> = {
    <span class="ruby-identifier">default</span><span class="ruby-operator">:</span> <span class="ruby-identifier">column</span>.<span class="ruby-identifier">default</span>,
    <span class="ruby-identifier">null</span><span class="ruby-operator">:</span> <span class="ruby-identifier">column</span>.<span class="ruby-identifier">null</span>,
    <span class="ruby-identifier">auto_increment</span><span class="ruby-operator">:</span> <span class="ruby-identifier">column</span>.<span class="ruby-identifier">auto_increment?</span>
  }

  <span class="ruby-identifier">current_type</span> = <span class="ruby-identifier">select_one</span>(<span class="ruby-node">&quot;SHOW COLUMNS FROM #{quote_table_name(table_name)} LIKE &#39;#{column_name}&#39;&quot;</span>, <span class="ruby-string">&#39;SCHEMA&#39;</span>)[<span class="ruby-string">&quot;Type&quot;</span>]
  <span class="ruby-identifier">td</span> = <span class="ruby-identifier">create_table_definition</span>(<span class="ruby-identifier">table_name</span>)
  <span class="ruby-identifier">cd</span> = <span class="ruby-identifier">td</span>.<span class="ruby-identifier">new_column_definition</span>(<span class="ruby-identifier">new_column_name</span>, <span class="ruby-identifier">current_type</span>, <span class="ruby-identifier">options</span>)
  <span class="ruby-identifier">schema_creation</span>.<span class="ruby-identifier">accept</span>(<span class="ruby-constant">ChangeColumnDefinition</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">cd</span>, <span class="ruby-identifier">column</span>.<span class="ruby-identifier">name</span>))
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-translate_exception" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">translate_exception</span><span
            class="method-args">(exception, message)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          
            <div class="method-calls-super">
              Calls superclass method
              
            </div>
          

          
          <div class="method-source-code" id="translate_exception-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 734</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">translate_exception</span>(<span class="ruby-identifier">exception</span>, <span class="ruby-identifier">message</span>)
  <span class="ruby-keyword">case</span> <span class="ruby-identifier">error_number</span>(<span class="ruby-identifier">exception</span>)
  <span class="ruby-keyword">when</span> <span class="ruby-value">1062</span>
    <span class="ruby-constant">RecordNotUnique</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">message</span>)
  <span class="ruby-keyword">when</span> <span class="ruby-value">1452</span>
    <span class="ruby-constant">InvalidForeignKey</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">message</span>)
  <span class="ruby-keyword">when</span> <span class="ruby-value">1406</span>
    <span class="ruby-constant">ValueTooLong</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">message</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-keyword">super</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="private-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Private Instance Methods</h3>
       </header>

    
      <div id="method-i-can_perform_case_insensitive_comparison_for-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">can_perform_case_insensitive_comparison_for?</span><span
            class="method-args">(column)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="can_perform_case_insensitive_comparison_for-3F-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 623</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">can_perform_case_insensitive_comparison_for?</span>(<span class="ruby-identifier">column</span>)
  <span class="ruby-identifier">column</span>.<span class="ruby-identifier">case_sensitive?</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-configure_connection" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">configure_connection</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="configure_connection-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 831</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">configure_connection</span>
  <span class="ruby-identifier">variables</span> = <span class="ruby-ivar">@config</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-value">:variables</span>, {}).<span class="ruby-identifier">stringify_keys</span>

  <span class="ruby-comment"># By default, MySQL &#39;where id is null&#39; selects the last inserted id; Turn this off.</span>
  <span class="ruby-identifier">variables</span>[<span class="ruby-string">&#39;sql_auto_is_null&#39;</span>] = <span class="ruby-value">0</span>

  <span class="ruby-comment"># Increase timeout so the server doesn&#39;t disconnect us.</span>
  <span class="ruby-identifier">wait_timeout</span> = <span class="ruby-ivar">@config</span>[<span class="ruby-value">:wait_timeout</span>]
  <span class="ruby-identifier">wait_timeout</span> = <span class="ruby-value">2147483</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">wait_timeout</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Integer</span>)
  <span class="ruby-identifier">variables</span>[<span class="ruby-string">&#39;wait_timeout&#39;</span>] = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">type_cast_config_to_integer</span>(<span class="ruby-identifier">wait_timeout</span>)

  <span class="ruby-identifier">defaults</span> = [<span class="ruby-string">&#39;:default&#39;</span>, <span class="ruby-value">:default</span>].<span class="ruby-identifier">to_set</span>

  <span class="ruby-comment"># Make MySQL reject illegal values rather than truncating or blanking them, see</span>
  <span class="ruby-comment"># http://dev.mysql.com/doc/refman/5.7/en/sql-mode.html#sqlmode_strict_all_tables</span>
  <span class="ruby-comment"># If the user has provided another value for sql_mode, don&#39;t replace it.</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">sql_mode</span> = <span class="ruby-identifier">variables</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-string">&#39;sql_mode&#39;</span>)
    <span class="ruby-identifier">sql_mode</span> = <span class="ruby-identifier">quote</span>(<span class="ruby-identifier">sql_mode</span>)
  <span class="ruby-keyword">elsif</span> <span class="ruby-operator">!</span><span class="ruby-identifier">defaults</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">strict_mode?</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">strict_mode?</span>
      <span class="ruby-identifier">sql_mode</span> = <span class="ruby-string">&quot;CONCAT(@@sql_mode, &#39;,STRICT_ALL_TABLES&#39;)&quot;</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">sql_mode</span> = <span class="ruby-string">&quot;REPLACE(@@sql_mode, &#39;STRICT_TRANS_TABLES&#39;, &#39;&#39;)&quot;</span>
      <span class="ruby-identifier">sql_mode</span> = <span class="ruby-node">&quot;REPLACE(#{sql_mode}, &#39;STRICT_ALL_TABLES&#39;, &#39;&#39;)&quot;</span>
      <span class="ruby-identifier">sql_mode</span> = <span class="ruby-node">&quot;REPLACE(#{sql_mode}, &#39;TRADITIONAL&#39;, &#39;&#39;)&quot;</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">sql_mode</span> = <span class="ruby-node">&quot;CONCAT(#{sql_mode}, &#39;,NO_AUTO_VALUE_ON_ZERO&#39;)&quot;</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">sql_mode_assignment</span> = <span class="ruby-node">&quot;@@SESSION.sql_mode = #{sql_mode}, &quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">sql_mode</span>

  <span class="ruby-comment"># NAMES does not have an equals sign, see</span>
  <span class="ruby-comment"># http://dev.mysql.com/doc/refman/5.7/en/set-statement.html#id944430</span>
  <span class="ruby-comment"># (trailing comma because variable_assignments will always have content)</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@config</span>[<span class="ruby-value">:encoding</span>]
    <span class="ruby-identifier">encoding</span> = <span class="ruby-node">&quot;NAMES #{@config[:encoding]}&quot;</span>
    <span class="ruby-identifier">encoding</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot; COLLATE #{@config[:collation]}&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@config</span>[<span class="ruby-value">:collation</span>]
    <span class="ruby-identifier">encoding</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&quot;, &quot;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># Gather up all of the SET variables...</span>
  <span class="ruby-identifier">variable_assignments</span> = <span class="ruby-identifier">variables</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>, <span class="ruby-identifier">v</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">defaults</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">v</span>)
      <span class="ruby-node">&quot;@@SESSION.#{k} = DEFAULT&quot;</span> <span class="ruby-comment"># Sets the value to the global or compile default</span>
    <span class="ruby-keyword">elsif</span> <span class="ruby-operator">!</span><span class="ruby-identifier">v</span>.<span class="ruby-identifier">nil?</span>
      <span class="ruby-node">&quot;@@SESSION.#{k} = #{quote(v)}&quot;</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-comment"># or else nil; compact to clear nils out</span>
  <span class="ruby-keyword">end</span>.<span class="ruby-identifier">compact</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&#39;, &#39;</span>)

  <span class="ruby-comment"># ...and send them all in one query</span>
  <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">query</span>  <span class="ruby-node">&quot;SET #{encoding} #{sql_mode_assignment} #{variable_assignments}&quot;</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-subquery_for" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">subquery_for</span><span
            class="method-args">(key, select)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p><a href="ConnectionAdapters/MySQL.html">MySQL</a> is too stupid to create a
temporary table for use subquery, so we have to give it some prompting in
the form of a subsubquery. Ugh!</p>
          
          

          
          <div class="method-source-code" id="subquery_for-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 814</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">subquery_for</span>(<span class="ruby-identifier">key</span>, <span class="ruby-identifier">select</span>)
  <span class="ruby-identifier">subsubselect</span> = <span class="ruby-identifier">select</span>.<span class="ruby-identifier">clone</span>
  <span class="ruby-identifier">subsubselect</span>.<span class="ruby-identifier">projections</span> = [<span class="ruby-identifier">key</span>]

  <span class="ruby-comment"># Materialize subquery by adding distinct</span>
  <span class="ruby-comment"># to work with MySQL 5.7.6 which sets optimizer_switch=&#39;derived_merge=on&#39;</span>
  <span class="ruby-identifier">subsubselect</span>.<span class="ruby-identifier">distinct</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">select</span>.<span class="ruby-identifier">limit</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">select</span>.<span class="ruby-identifier">offset</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">select</span>.<span class="ruby-identifier">orders</span>.<span class="ruby-identifier">any?</span>

  <span class="ruby-identifier">subselect</span> = <span class="ruby-constant">Arel</span><span class="ruby-operator">::</span><span class="ruby-constant">SelectManager</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">select</span>.<span class="ruby-identifier">engine</span>)
  <span class="ruby-identifier">subselect</span>.<span class="ruby-identifier">project</span> <span class="ruby-constant">Arel</span>.<span class="ruby-identifier">sql</span>(<span class="ruby-identifier">key</span>.<span class="ruby-identifier">name</span>)
  <span class="ruby-identifier">subselect</span>.<span class="ruby-identifier">from</span> <span class="ruby-identifier">subsubselect</span>.<span class="ruby-identifier">as</span>(<span class="ruby-string">&#39;__active_record_temp&#39;</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-supports_rename_index-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">supports_rename_index?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="supports_rename_index-3F-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 827</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">supports_rename_index?</span>
  <span class="ruby-identifier">mariadb?</span> <span class="ruby-operator">?</span> <span class="ruby-keyword">false</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">version</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-string">&#39;5.7.6&#39;</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://docs.seattlerb.org/rdoc/">RDoc</a> 4.3.0.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

