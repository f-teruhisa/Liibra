<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>module ActiveRecord::ModelSchema::ClassMethods - activerecord-5.0.1 Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../../";
</script>

<script src="../../js/jquery.js"></script>
<script src="../../js/darkfish.js"></script>

<link href="../../css/fonts.css" rel="stylesheet">
<link href="../../css/rdoc.css" rel="stylesheet">



<body id="top" role="document" class="module">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../../table_of_contents.html#pages">Pages</a>
    <a href="../../table_of_contents.html#classes">Classes</a>
    <a href="../../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    
    
    
    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li ><a href="#method-i-column_defaults">#column_defaults</a>
    
    <li ><a href="#method-i-column_names">#column_names</a>
    
    <li ><a href="#method-i-columns">#columns</a>
    
    <li ><a href="#method-i-compute_table_name">#compute_table_name</a>
    
    <li ><a href="#method-i-content_columns">#content_columns</a>
    
    <li ><a href="#method-i-inheritance_column">#inheritance_column</a>
    
    <li ><a href="#method-i-inheritance_column-3D">#inheritance_column=</a>
    
    <li ><a href="#method-i-load_schema">#load_schema</a>
    
    <li ><a href="#method-i-load_schema-21">#load_schema!</a>
    
    <li ><a href="#method-i-next_sequence_value">#next_sequence_value</a>
    
    <li ><a href="#method-i-prefetch_primary_key-3F">#prefetch_primary_key?</a>
    
    <li ><a href="#method-i-quoted_table_name">#quoted_table_name</a>
    
    <li ><a href="#method-i-reload_schema_from_cache">#reload_schema_from_cache</a>
    
    <li ><a href="#method-i-reset_column_information">#reset_column_information</a>
    
    <li ><a href="#method-i-schema_loaded-3F">#schema_loaded?</a>
    
    <li ><a href="#method-i-sequence_name">#sequence_name</a>
    
    <li ><a href="#method-i-sequence_name-3D">#sequence_name=</a>
    
    <li ><a href="#method-i-table_exists-3F">#table_exists?</a>
    
    <li ><a href="#method-i-table_name">#table_name</a>
    
    <li ><a href="#method-i-table_name-3D">#table_name=</a>
    
    <li ><a href="#method-i-type_for_attribute">#type_for_attribute</a>
    
    <li ><a href="#method-i-undecorated_table_name">#undecorated_table_name</a>
    
    <li ><a href="#method-i-warn_if_deprecated_type">#warn_if_deprecated_type</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="module-ActiveRecord::ModelSchema::ClassMethods">
  <h1 id="module-ActiveRecord::ModelSchema::ClassMethods" class="module">
    module ActiveRecord::ModelSchema::ClassMethods
  </h1>

  <section class="description">
    
  </section>

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    

    
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

    
      <div id="method-i-column_defaults" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">column_defaults</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns a hash where the keys are column names and the values are default
values when instantiating the Active Record object for this table.</p>
          
          

          
          <div class="method-source-code" id="column_defaults-source">
            <pre><span class="ruby-comment"># File lib/active_record/model_schema.rb, line 374</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">column_defaults</span>
  <span class="ruby-identifier">load_schema</span>
  <span class="ruby-identifier">_default_attributes</span>.<span class="ruby-identifier">to_hash</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-column_names" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">column_names</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns an array of column names as strings.</p>
          
          

          
          <div class="method-source-code" id="column_names-source">
            <pre><span class="ruby-comment"># File lib/active_record/model_schema.rb, line 384</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">column_names</span>
  <span class="ruby-ivar">@column_names</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">columns</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:name</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-columns" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">columns</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="columns-source">
            <pre><span class="ruby-comment"># File lib/active_record/model_schema.rb, line 343</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">columns</span>
  <span class="ruby-identifier">load_schema</span>
  <span class="ruby-ivar">@columns</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">columns_hash</span>.<span class="ruby-identifier">values</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-content_columns" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">content_columns</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns an array of column objects where the primary id, all columns ending
in “_id” or “_count”, and columns used for single table inheritance have
been removed.</p>
          
          

          
          <div class="method-source-code" id="content_columns-source">
            <pre><span class="ruby-comment"># File lib/active_record/model_schema.rb, line 390</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">content_columns</span>
  <span class="ruby-ivar">@content_columns</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">columns</span>.<span class="ruby-identifier">reject</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">primary_key</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">/(_id|_count)$/</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">inheritance_column</span> }
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-inheritance_column" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">inheritance_column</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Defines the name of the table column which will store the class name on
single-table inheritance situations.</p>

<p>The default inheritance column name is <code>type</code>, which means
it&#39;s a reserved word inside Active Record. To be able to use
single-table inheritance with another column name, or to use the column
<code>type</code> in your own model for something else, you can set
<code>inheritance_column</code>:</p>

<pre class="ruby"><span class="ruby-keyword">self</span>.<span class="ruby-identifier">inheritance_column</span> = <span class="ruby-string">&#39;zoink&#39;</span>
</pre>
          
          

          
          <div class="method-source-code" id="inheritance_column-source">
            <pre><span class="ruby-comment"># File lib/active_record/model_schema.rb, line 271</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">inheritance_column</span>
  (<span class="ruby-ivar">@inheritance_column</span> <span class="ruby-operator">||=</span> <span class="ruby-keyword">nil</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">superclass</span>.<span class="ruby-identifier">inheritance_column</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-inheritance_column-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">inheritance_column=</span><span
            class="method-args">(value)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Sets the value of <a
href="ClassMethods.html#method-i-inheritance_column">#inheritance_column</a></p>
          
          

          
          <div class="method-source-code" id="inheritance_column-3D-source">
            <pre><span class="ruby-comment"># File lib/active_record/model_schema.rb, line 276</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">inheritance_column=</span>(<span class="ruby-identifier">value</span>)
  <span class="ruby-ivar">@inheritance_column</span> = <span class="ruby-identifier">value</span>.<span class="ruby-identifier">to_s</span>
  <span class="ruby-ivar">@explicit_inheritance_column</span> = <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-next_sequence_value" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">next_sequence_value</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the next value that will be used as the primary key on an insert
statement.</p>
          
          

          
          <div class="method-source-code" id="next_sequence_value-source">
            <pre><span class="ruby-comment"># File lib/active_record/model_schema.rb, line 321</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">next_sequence_value</span>
  <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">next_sequence_value</span>(<span class="ruby-identifier">sequence_name</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-prefetch_primary_key-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">prefetch_primary_key?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Determines if the primary key values should be selected from their
corresponding sequence before the insert statement.</p>
          
          

          
          <div class="method-source-code" id="prefetch_primary_key-3F-source">
            <pre><span class="ruby-comment"># File lib/active_record/model_schema.rb, line 315</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">prefetch_primary_key?</span>
  <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">prefetch_primary_key?</span>(<span class="ruby-identifier">table_name</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-quoted_table_name" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">quoted_table_name</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns a quoted version of the table name, used to construct SQL
statements.</p>
          
          

          
          <div class="method-source-code" id="quoted_table_name-source">
            <pre><span class="ruby-comment"># File lib/active_record/model_schema.rb, line 239</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">quoted_table_name</span>
  <span class="ruby-ivar">@quoted_table_name</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">quote_table_name</span>(<span class="ruby-identifier">table_name</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-reset_column_information" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">reset_column_information</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Resets all the cached information about columns, which will cause them to
be reloaded on the next request.</p>

<p>The most common usage pattern for this method is probably in a migration,
when just after creating a table you want to populate it with some default
values, eg:</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">CreateJobLevels</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Migration</span>[<span class="ruby-value">5.0</span>]
  <span class="ruby-keyword">def</span> <span class="ruby-identifier">up</span>
    <span class="ruby-identifier">create_table</span> :<span class="ruby-identifier">job_levels</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">t</span>.<span class="ruby-identifier">integer</span> :<span class="ruby-identifier">id</span>
      <span class="ruby-identifier">t</span>.<span class="ruby-identifier">string</span> :<span class="ruby-identifier">name</span>

      <span class="ruby-identifier">t</span>.<span class="ruby-identifier">timestamps</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-constant">JobLevel</span>.<span class="ruby-identifier">reset_column_information</span>
    <span class="ruby-node">%w{assistant executive manager director}</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">type</span><span class="ruby-operator">|</span>
      <span class="ruby-constant">JobLevel</span>.<span class="ruby-identifier">create</span>(<span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-identifier">type</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">def</span> <span class="ruby-identifier">down</span>
    <span class="ruby-identifier">drop_table</span> :<span class="ruby-identifier">job_levels</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>
          
          

          
          <div class="method-source-code" id="reset_column_information-source">
            <pre><span class="ruby-comment"># File lib/active_record/model_schema.rb, line 420</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">reset_column_information</span>
  <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">clear_cache!</span>
  <span class="ruby-identifier">undefine_attribute_methods</span>
  <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">schema_cache</span>.<span class="ruby-identifier">clear_data_source_cache!</span>(<span class="ruby-identifier">table_name</span>)

  <span class="ruby-identifier">reload_schema_from_cache</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-sequence_name" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">sequence_name</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="sequence_name-source">
            <pre><span class="ruby-comment"># File lib/active_record/model_schema.rb, line 281</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">sequence_name</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">base_class</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">self</span>
    <span class="ruby-ivar">@sequence_name</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">reset_sequence_name</span>
  <span class="ruby-keyword">else</span>
    (<span class="ruby-ivar">@sequence_name</span> <span class="ruby-operator">||=</span> <span class="ruby-keyword">nil</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">base_class</span>.<span class="ruby-identifier">sequence_name</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-sequence_name-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">sequence_name=</span><span
            class="method-args">(value)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Sets the name of the sequence to use when generating ids to the given
value, or (if the value is nil or false) to the value returned by the given
block. This is required for Oracle and is useful for any database which
relies on sequences for primary key generation.</p>

<p>If a sequence name is not explicitly set when using Oracle, it will default
to the commonly used pattern of: #{table_name}_seq</p>

<p>If a sequence name is not explicitly set when using PostgreSQL, it will
discover the sequence corresponding to your primary key for you.</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Project</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">sequence_name</span> = <span class="ruby-string">&quot;projectseq&quot;</span>   <span class="ruby-comment"># default would have been &quot;project_seq&quot;</span>
<span class="ruby-keyword">end</span>
</pre>
          
          

          
          <div class="method-source-code" id="sequence_name-3D-source">
            <pre><span class="ruby-comment"># File lib/active_record/model_schema.rb, line 308</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">sequence_name=</span>(<span class="ruby-identifier">value</span>)
  <span class="ruby-ivar">@sequence_name</span>          = <span class="ruby-identifier">value</span>.<span class="ruby-identifier">to_s</span>
  <span class="ruby-ivar">@explicit_sequence_name</span> = <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-table_exists-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">table_exists?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Indicates whether the table associated with this class exists</p>
          
          

          
          <div class="method-source-code" id="table_exists-3F-source">
            <pre><span class="ruby-comment"># File lib/active_record/model_schema.rb, line 326</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">table_exists?</span>
  <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">schema_cache</span>.<span class="ruby-identifier">data_source_exists?</span>(<span class="ruby-identifier">table_name</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-table_name" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">table_name</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Guesses the table name (in forced lower-case) based on the name of the
class in the inheritance hierarchy descending directly from <a
href="../Base.html">ActiveRecord::Base</a>. So if the hierarchy looks like:
Reply &lt; Message &lt; <a href="../Base.html">ActiveRecord::Base</a>, then
Message is used to guess the table name even when called on Reply. The
rules used to do the guess are handled by the Inflector class in Active
Support, which knows almost all common English inflections. You can add new
inflections in config/initializers/inflections.rb.</p>

<p>Nested classes are given table names prefixed by the singular form of the
parent&#39;s table name. Enclosing modules are not considered.</p>

<h4 id="method-i-table_name-label-Examples">Examples<span><a href="#method-i-table_name-label-Examples">&para;</a> <a href="#top">&uarr;</a></span></h4>

<pre>class Invoice &lt; ActiveRecord::Base
end

file                  class               table_name
invoice.rb            Invoice             invoices

class Invoice &lt; ActiveRecord::Base
  class Lineitem &lt; ActiveRecord::Base
  end
end

file                  class               table_name
invoice.rb            Invoice::Lineitem   invoice_lineitems

module Invoice
  class Lineitem &lt; ActiveRecord::Base
  end
end

file                  class               table_name
invoice/lineitem.rb   Invoice::Lineitem   lineitems</pre>

<p>Additionally, the class-level <code>table_name_prefix</code> is prepended
and the <code>table_name_suffix</code> is appended. So if you have “myapp_”
as a prefix, the table name guess for an Invoice class becomes
“myapp_invoices”. Invoice::Lineitem becomes “myapp_invoice_lineitems”.</p>

<p>You can also set your own table name explicitly:</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Mouse</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">table_name</span> = <span class="ruby-string">&quot;mice&quot;</span>
<span class="ruby-keyword">end</span>
</pre>
          
          

          
          <div class="method-source-code" id="table_name-source">
            <pre><span class="ruby-comment"># File lib/active_record/model_schema.rb, line 213</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">table_name</span>
  <span class="ruby-identifier">reset_table_name</span> <span class="ruby-keyword">unless</span> <span class="ruby-keyword">defined?</span>(<span class="ruby-ivar">@table_name</span>)
  <span class="ruby-ivar">@table_name</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-table_name-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">table_name=</span><span
            class="method-args">(value)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Sets the table name explicitly. Example:</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Project</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">table_name</span> = <span class="ruby-string">&quot;project&quot;</span>
<span class="ruby-keyword">end</span>
</pre>
          
          

          
          <div class="method-source-code" id="table_name-3D-source">
            <pre><span class="ruby-comment"># File lib/active_record/model_schema.rb, line 223</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">table_name=</span>(<span class="ruby-identifier">value</span>)
  <span class="ruby-identifier">value</span> = <span class="ruby-identifier">value</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">to_s</span>

  <span class="ruby-keyword">if</span> <span class="ruby-keyword">defined?</span>(<span class="ruby-ivar">@table_name</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">value</span> <span class="ruby-operator">==</span> <span class="ruby-ivar">@table_name</span>
    <span class="ruby-identifier">reset_column_information</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">connected?</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-ivar">@table_name</span>        = <span class="ruby-identifier">value</span>
  <span class="ruby-ivar">@quoted_table_name</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@arel_table</span>        = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@sequence_name</span>     = <span class="ruby-keyword">nil</span> <span class="ruby-keyword">unless</span> <span class="ruby-keyword">defined?</span>(<span class="ruby-ivar">@explicit_sequence_name</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@explicit_sequence_name</span>
  <span class="ruby-ivar">@predicate_builder</span> = <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-type_for_attribute" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">type_for_attribute</span><span
            class="method-args">(attr_name, &block)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the type of the attribute with the given name, after applying all
modifiers. This method is the only valid source of information for anything
related to the types of a model&#39;s attributes. This method will access
the database and load the model&#39;s schema if it is required.</p>

<p>The return value of this method will implement the interface described by
ActiveModel::Type::Value (though the object itself may not subclass it).</p>

<p><code>attr_name</code> The name of the attribute to retrieve the type for.
Must be a string</p>
          
          

          
          <div class="method-source-code" id="type_for_attribute-source">
            <pre><span class="ruby-comment"># File lib/active_record/model_schema.rb, line 364</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">type_for_attribute</span>(<span class="ruby-identifier">attr_name</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">block</span>
    <span class="ruby-identifier">attribute_types</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-identifier">attr_name</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">attribute_types</span>[<span class="ruby-identifier">attr_name</span>]
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="private-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Private Instance Methods</h3>
       </header>

    
      <div id="method-i-compute_table_name" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">compute_table_name</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Computes and returns a table name according to default conventions.</p>
          
          

          
          <div class="method-source-code" id="compute_table_name-source">
            <pre><span class="ruby-comment"># File lib/active_record/model_schema.rb, line 477</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">compute_table_name</span>
  <span class="ruby-identifier">base</span> = <span class="ruby-identifier">base_class</span>
  <span class="ruby-keyword">if</span> <span class="ruby-keyword">self</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">base</span>
    <span class="ruby-comment"># Nested classes are prefixed with singular parent table name.</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">parent</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">Base</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">parent</span>.<span class="ruby-identifier">abstract_class?</span>
      <span class="ruby-identifier">contained</span> = <span class="ruby-identifier">parent</span>.<span class="ruby-identifier">table_name</span>
      <span class="ruby-identifier">contained</span> = <span class="ruby-identifier">contained</span>.<span class="ruby-identifier">singularize</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">parent</span>.<span class="ruby-identifier">pluralize_table_names</span>
      <span class="ruby-identifier">contained</span> <span class="ruby-operator">+=</span> <span class="ruby-string">&#39;_&#39;</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-node">&quot;#{full_table_name_prefix}#{contained}#{undecorated_table_name(name)}#{full_table_name_suffix}&quot;</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-comment"># STI subclasses always use their superclass&#39; table.</span>
    <span class="ruby-identifier">base</span>.<span class="ruby-identifier">table_name</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-load_schema" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">load_schema</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="load_schema-source">
            <pre><span class="ruby-comment"># File lib/active_record/model_schema.rb, line 434</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">load_schema</span>
  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">schema_loaded?</span>
    <span class="ruby-identifier">load_schema!</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-load_schema-21" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">load_schema!</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="load_schema-21-source">
            <pre><span class="ruby-comment"># File lib/active_record/model_schema.rb, line 440</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">load_schema!</span>
  <span class="ruby-ivar">@columns_hash</span> = <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">schema_cache</span>.<span class="ruby-identifier">columns_hash</span>(<span class="ruby-identifier">table_name</span>).<span class="ruby-identifier">except</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">ignored_columns</span>)
  <span class="ruby-ivar">@columns_hash</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">name</span>, <span class="ruby-identifier">column</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">warn_if_deprecated_type</span>(<span class="ruby-identifier">column</span>)
    <span class="ruby-identifier">define_attribute</span>(
      <span class="ruby-identifier">name</span>,
      <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">lookup_cast_type_from_column</span>(<span class="ruby-identifier">column</span>),
      <span class="ruby-identifier">default</span><span class="ruby-operator">:</span> <span class="ruby-identifier">column</span>.<span class="ruby-identifier">default</span>,
      <span class="ruby-identifier">user_provided_default</span><span class="ruby-operator">:</span> <span class="ruby-keyword">false</span>
    )
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-reload_schema_from_cache" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">reload_schema_from_cache</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="reload_schema_from_cache-source">
            <pre><span class="ruby-comment"># File lib/active_record/model_schema.rb, line 453</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">reload_schema_from_cache</span>
  <span class="ruby-ivar">@arel_engine</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@arel_table</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@column_names</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@attribute_types</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@content_columns</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@default_attributes</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@inheritance_column</span> = <span class="ruby-keyword">nil</span> <span class="ruby-keyword">unless</span> <span class="ruby-keyword">defined?</span>(<span class="ruby-ivar">@explicit_inheritance_column</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@explicit_inheritance_column</span>
  <span class="ruby-ivar">@attributes_builder</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@columns</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@columns_hash</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@attribute_names</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">direct_descendants</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">descendant</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">descendant</span>.<span class="ruby-identifier">send</span>(<span class="ruby-value">:reload_schema_from_cache</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-schema_loaded-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">schema_loaded?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="schema_loaded-3F-source">
            <pre><span class="ruby-comment"># File lib/active_record/model_schema.rb, line 430</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">schema_loaded?</span>
  <span class="ruby-keyword">defined?</span>(<span class="ruby-ivar">@columns_hash</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@columns_hash</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-undecorated_table_name" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">undecorated_table_name</span><span
            class="method-args">(class_name = base_class.name)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Guesses the table name, but does not decorate it with prefix and suffix
information.</p>
          
          

          
          <div class="method-source-code" id="undecorated_table_name-source">
            <pre><span class="ruby-comment"># File lib/active_record/model_schema.rb, line 471</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">undecorated_table_name</span>(<span class="ruby-identifier">class_name</span> = <span class="ruby-identifier">base_class</span>.<span class="ruby-identifier">name</span>)
  <span class="ruby-identifier">table_name</span> = <span class="ruby-identifier">class_name</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">demodulize</span>.<span class="ruby-identifier">underscore</span>
  <span class="ruby-identifier">pluralize_table_names</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">table_name</span>.<span class="ruby-identifier">pluralize</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">table_name</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-warn_if_deprecated_type" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">warn_if_deprecated_type</span><span
            class="method-args">(column)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="warn_if_deprecated_type-source">
            <pre><span class="ruby-comment"># File lib/active_record/model_schema.rb, line 494</span>
      <span class="ruby-keyword">def</span> <span class="ruby-identifier">warn_if_deprecated_type</span>(<span class="ruby-identifier">column</span>)
        <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">attributes_to_define_after_schema_loads</span>.<span class="ruby-identifier">key?</span>(<span class="ruby-identifier">column</span>.<span class="ruby-identifier">name</span>)
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">column</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:oid</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">column</span>.<span class="ruby-identifier">sql_type</span>.<span class="ruby-identifier">start_with?</span>(<span class="ruby-string">&quot;point&quot;</span>)
          <span class="ruby-keyword">if</span> <span class="ruby-identifier">column</span>.<span class="ruby-identifier">array?</span>
            <span class="ruby-identifier">array_arguments</span> = <span class="ruby-string">&quot;, array: true&quot;</span>
          <span class="ruby-keyword">else</span>
            <span class="ruby-identifier">array_arguments</span> = <span class="ruby-string">&quot;&quot;</span>
          <span class="ruby-keyword">end</span>
          <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Deprecation</span>.<span class="ruby-identifier">warn</span>(<span class="ruby-string">&quot;            The behavior of the `:point` type will be changing in Rails 5.1 to
            return a `Point` object, rather than an `Array`. If you&#39;d like to
            keep the old behavior, you can add this line to #{self.name}:

              attribute :#{column.name}, :legacy_point#{array_arguments}

            If you&#39;d like the new behavior today, you can add this line:

              attribute :#{column.name}, :point#{array_arguments}
&quot;</span>.<span class="ruby-identifier">strip_heredoc</span>)
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://docs.seattlerb.org/rdoc/">RDoc</a> 4.3.0.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

