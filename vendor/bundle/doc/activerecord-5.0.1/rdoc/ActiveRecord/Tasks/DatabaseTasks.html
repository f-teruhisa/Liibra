<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>module ActiveRecord::Tasks::DatabaseTasks - activerecord-5.0.1 Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../../";
</script>

<script src="../../js/jquery.js"></script>
<script src="../../js/darkfish.js"></script>

<link href="../../css/fonts.css" rel="stylesheet">
<link href="../../css/rdoc.css" rel="stylesheet">



<body id="top" role="document" class="module">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../../table_of_contents.html#pages">Pages</a>
    <a href="../../table_of_contents.html#classes">Classes</a>
    <a href="../../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    
    
    
    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li ><a href="#method-i-charset">#charset</a>
    
    <li ><a href="#method-i-charset_current">#charset_current</a>
    
    <li ><a href="#method-i-check_protected_environments-21">#check_protected_environments!</a>
    
    <li ><a href="#method-i-check_schema_file">#check_schema_file</a>
    
    <li ><a href="#method-i-class_for_adapter">#class_for_adapter</a>
    
    <li ><a href="#method-i-collation">#collation</a>
    
    <li ><a href="#method-i-collation_current">#collation_current</a>
    
    <li ><a href="#method-i-create">#create</a>
    
    <li ><a href="#method-i-create_all">#create_all</a>
    
    <li ><a href="#method-i-create_current">#create_current</a>
    
    <li ><a href="#method-i-current_config">#current_config</a>
    
    <li ><a href="#method-i-db_dir">#db_dir</a>
    
    <li ><a href="#method-i-drop">#drop</a>
    
    <li ><a href="#method-i-drop_all">#drop_all</a>
    
    <li ><a href="#method-i-drop_current">#drop_current</a>
    
    <li ><a href="#method-i-each_current_configuration">#each_current_configuration</a>
    
    <li ><a href="#method-i-each_local_configuration">#each_local_configuration</a>
    
    <li ><a href="#method-i-env">#env</a>
    
    <li ><a href="#method-i-fixtures_path">#fixtures_path</a>
    
    <li ><a href="#method-i-load_schema_current">#load_schema_current</a>
    
    <li ><a href="#method-i-load_schema_for">#load_schema_for</a>
    
    <li ><a href="#method-i-load_seed">#load_seed</a>
    
    <li ><a href="#method-i-local_database-3F">#local_database?</a>
    
    <li ><a href="#method-i-migrate">#migrate</a>
    
    <li ><a href="#method-i-migrations_paths">#migrations_paths</a>
    
    <li ><a href="#method-i-purge">#purge</a>
    
    <li ><a href="#method-i-purge_all">#purge_all</a>
    
    <li ><a href="#method-i-purge_current">#purge_current</a>
    
    <li ><a href="#method-i-register_task">#register_task</a>
    
    <li ><a href="#method-i-root">#root</a>
    
    <li ><a href="#method-i-schema_file">#schema_file</a>
    
    <li ><a href="#method-i-seed_loader">#seed_loader</a>
    
    <li ><a href="#method-i-structure_dump">#structure_dump</a>
    
    <li ><a href="#method-i-structure_load">#structure_load</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="module-ActiveRecord::Tasks::DatabaseTasks">
  <h1 id="module-ActiveRecord::Tasks::DatabaseTasks" class="module">
    module ActiveRecord::Tasks::DatabaseTasks
  </h1>

  <section class="description">
    
<p><a href="DatabaseTasks.html">ActiveRecord::Tasks::DatabaseTasks</a> is a
utility class, which encapsulates logic behind common tasks used to manage
database and migrations.</p>

<p>The tasks defined here are used with Rake tasks provided by Active Record.</p>

<p>In order to use <a href="DatabaseTasks.html">DatabaseTasks</a>, a few
config values need to be set. All the needed config values are set by Rails
already, so it&#39;s necessary to do it only if you want to change the
defaults or when you want to use Active Record outside of Rails (in such
case after configuring the database tasks, you can also use the rake tasks
defined in Active Record).</p>

<p>The possible config values are:</p>
<ul><li>
<p><code>env</code>: current environment (like Rails.env).</p>
</li><li>
<p><code>database_configuration</code>: configuration of your databases (as in
<code>config/database.yml</code>).</p>
</li><li>
<p><code>db_dir</code>: your <code>db</code> directory.</p>
</li><li>
<p><code>fixtures_path</code>: a path to fixtures directory.</p>
</li><li>
<p><code>migrations_paths</code>: a list of paths to directories with
migrations.</p>
</li><li>
<p><code>seed_loader</code>: an object which will load seeds, it needs to
respond to the <code>load_seed</code> method.</p>
</li><li>
<p><code>root</code>: a path to the root of the application.</p>
</li></ul>

<p>Example usage of <a href="DatabaseTasks.html">DatabaseTasks</a> outside
Rails could look as such:</p>

<pre class="ruby"><span class="ruby-identifier">include</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Tasks</span>
<span class="ruby-constant">DatabaseTasks</span>.<span class="ruby-identifier">database_configuration</span> = <span class="ruby-constant">YAML</span>.<span class="ruby-identifier">load_file</span>(<span class="ruby-string">&#39;my_database_config.yml&#39;</span>)
<span class="ruby-constant">DatabaseTasks</span>.<span class="ruby-identifier">db_dir</span> = <span class="ruby-string">&#39;db&#39;</span>
<span class="ruby-comment"># other settings...</span>

<span class="ruby-constant">DatabaseTasks</span>.<span class="ruby-identifier">create_current</span>(<span class="ruby-string">&#39;production&#39;</span>)
</pre>

  </section>

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    
    <section class="constants-list">
      <header>
        <h3>Constants</h3>
      </header>
      <dl>
      
        <dt id="LOCAL_HOSTS">LOCAL_HOSTS
        
        <dd>
        
      
      </dl>
    </section>
    

    
    <section class="attribute-method-details" class="method-section">
      <header>
        <h3>Attributes</h3>
      </header>

      
      <div id="attribute-i-current_config" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">current_config</span><span
            class="attribute-access-type">[W]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-i-database_configuration" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">database_configuration</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-i-db_dir" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">db_dir</span><span
            class="attribute-access-type">[W]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-i-env" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">env</span><span
            class="attribute-access-type">[W]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-i-fixtures_path" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">fixtures_path</span><span
            class="attribute-access-type">[W]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-i-migrations_paths" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">migrations_paths</span><span
            class="attribute-access-type">[W]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-i-root" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">root</span><span
            class="attribute-access-type">[W]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-i-seed_loader" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">seed_loader</span><span
            class="attribute-access-type">[W]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
    </section>
    

    
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

    
      <div id="method-i-charset" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">charset</span><span
            class="method-args">(*arguments)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="charset-source">
            <pre><span class="ruby-comment"># File lib/active_record/tasks/database_tasks.rb, line 173</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">charset</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">arguments</span>)
  <span class="ruby-identifier">configuration</span> = <span class="ruby-identifier">arguments</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">class_for_adapter</span>(<span class="ruby-identifier">configuration</span>[<span class="ruby-string">&#39;adapter&#39;</span>]).<span class="ruby-identifier">new</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">arguments</span>).<span class="ruby-identifier">charset</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-charset_current" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">charset_current</span><span
            class="method-args">(environment = env)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="charset_current-source">
            <pre><span class="ruby-comment"># File lib/active_record/tasks/database_tasks.rb, line 169</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">charset_current</span>(<span class="ruby-identifier">environment</span> = <span class="ruby-identifier">env</span>)
  <span class="ruby-identifier">charset</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">configurations</span>[<span class="ruby-identifier">environment</span>]
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-check_protected_environments-21" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">check_protected_environments!</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="check_protected_environments-21-source">
            <pre><span class="ruby-comment"># File lib/active_record/tasks/database_tasks.rb, line 45</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">check_protected_environments!</span>
  <span class="ruby-keyword">unless</span> <span class="ruby-constant">ENV</span>[<span class="ruby-string">&#39;DISABLE_DATABASE_ENVIRONMENT_CHECK&#39;</span>]
    <span class="ruby-identifier">current</span> = <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Migrator</span>.<span class="ruby-identifier">current_environment</span>
    <span class="ruby-identifier">stored</span>  = <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Migrator</span>.<span class="ruby-identifier">last_stored_environment</span>

    <span class="ruby-keyword">if</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Migrator</span>.<span class="ruby-identifier">protected_environment?</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">ProtectedEnvironmentError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">stored</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">stored</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">stored</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">current</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">EnvironmentMismatchError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">current</span><span class="ruby-operator">:</span> <span class="ruby-identifier">current</span>, <span class="ruby-identifier">stored</span><span class="ruby-operator">:</span> <span class="ruby-identifier">stored</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">rescue</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">NoDatabaseError</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-check_schema_file" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">check_schema_file</span><span
            class="method-args">(filename)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="check_schema_file-source">
            <pre><span class="ruby-comment"># File lib/active_record/tasks/database_tasks.rb, line 258</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">check_schema_file</span>(<span class="ruby-identifier">filename</span>)
  <span class="ruby-keyword">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">filename</span>)
    <span class="ruby-identifier">message</span> = <span class="ruby-node">%Q{#{filename} doesn&#39;t exist yet. Run `rails db:migrate` to create it, then try again.}</span>
    <span class="ruby-identifier">message</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">%Q{ If you do not intend to use a database, you should instead alter #{Rails.root}/config/application.rb to limit the frameworks that will be loaded.}</span> <span class="ruby-keyword">if</span> <span class="ruby-keyword">defined?</span>(<span class="ruby-operator">::</span><span class="ruby-constant">Rails</span>)
    <span class="ruby-constant">Kernel</span>.<span class="ruby-identifier">abort</span> <span class="ruby-identifier">message</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-collation" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">collation</span><span
            class="method-args">(*arguments)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="collation-source">
            <pre><span class="ruby-comment"># File lib/active_record/tasks/database_tasks.rb, line 182</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">collation</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">arguments</span>)
  <span class="ruby-identifier">configuration</span> = <span class="ruby-identifier">arguments</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">class_for_adapter</span>(<span class="ruby-identifier">configuration</span>[<span class="ruby-string">&#39;adapter&#39;</span>]).<span class="ruby-identifier">new</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">arguments</span>).<span class="ruby-identifier">collation</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-collation_current" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">collation_current</span><span
            class="method-args">(environment = env)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="collation_current-source">
            <pre><span class="ruby-comment"># File lib/active_record/tasks/database_tasks.rb, line 178</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">collation_current</span>(<span class="ruby-identifier">environment</span> = <span class="ruby-identifier">env</span>)
  <span class="ruby-identifier">collation</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">configurations</span>[<span class="ruby-identifier">environment</span>]
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-create" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">create</span><span
            class="method-args">(*arguments)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="create-source">
            <pre><span class="ruby-comment"># File lib/active_record/tasks/database_tasks.rb, line 107</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">create</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">arguments</span>)
  <span class="ruby-identifier">configuration</span> = <span class="ruby-identifier">arguments</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">class_for_adapter</span>(<span class="ruby-identifier">configuration</span>[<span class="ruby-string">&#39;adapter&#39;</span>]).<span class="ruby-identifier">new</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">arguments</span>).<span class="ruby-identifier">create</span>
  <span class="ruby-identifier">$stdout</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;Created database &#39;#{configuration[&#39;database&#39;]}&#39;&quot;</span>
<span class="ruby-keyword">rescue</span> <span class="ruby-constant">DatabaseAlreadyExists</span>
  <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;Database &#39;#{configuration[&#39;database&#39;]}&#39; already exists&quot;</span>
<span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">error</span>
  <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-identifier">error</span>
  <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;Couldn&#39;t create database for #{configuration.inspect}&quot;</span>
  <span class="ruby-identifier">raise</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-create_all" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">create_all</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="create_all-source">
            <pre><span class="ruby-comment"># File lib/active_record/tasks/database_tasks.rb, line 119</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">create_all</span>
  <span class="ruby-identifier">old_pool</span> = <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">connection_handler</span>.<span class="ruby-identifier">retrieve_connection_pool</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">connection_specification_name</span>)
  <span class="ruby-identifier">each_local_configuration</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">configuration</span><span class="ruby-operator">|</span> <span class="ruby-identifier">create</span> <span class="ruby-identifier">configuration</span> }
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">old_pool</span>
    <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">connection_handler</span>.<span class="ruby-identifier">establish_connection</span>(<span class="ruby-identifier">old_pool</span>.<span class="ruby-identifier">spec</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-create_current" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">create_current</span><span
            class="method-args">(environment = env)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="create_current-source">
            <pre><span class="ruby-comment"># File lib/active_record/tasks/database_tasks.rb, line 127</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">create_current</span>(<span class="ruby-identifier">environment</span> = <span class="ruby-identifier">env</span>)
  <span class="ruby-identifier">each_current_configuration</span>(<span class="ruby-identifier">environment</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">configuration</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">create</span> <span class="ruby-identifier">configuration</span>
  }
  <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">establish_connection</span>(<span class="ruby-identifier">environment</span>.<span class="ruby-identifier">to_sym</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-current_config" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">current_config</span><span
            class="method-args">(options = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="current_config-source">
            <pre><span class="ruby-comment"># File lib/active_record/tasks/database_tasks.rb, line 98</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">current_config</span>(<span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">options</span>.<span class="ruby-identifier">reverse_merge!</span> <span class="ruby-value">:env</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">env</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-value">:config</span>)
    <span class="ruby-ivar">@current_config</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:config</span>]
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@current_config</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">configurations</span>[<span class="ruby-identifier">options</span>[<span class="ruby-value">:env</span>]]
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-db_dir" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">db_dir</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="db_dir-source">
            <pre><span class="ruby-comment"># File lib/active_record/tasks/database_tasks.rb, line 70</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">db_dir</span>
  <span class="ruby-ivar">@db_dir</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">Rails</span>.<span class="ruby-identifier">application</span>.<span class="ruby-identifier">config</span>.<span class="ruby-identifier">paths</span>[<span class="ruby-string">&quot;db&quot;</span>].<span class="ruby-identifier">first</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-drop" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">drop</span><span
            class="method-args">(*arguments)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="drop-source">
            <pre><span class="ruby-comment"># File lib/active_record/tasks/database_tasks.rb, line 134</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">drop</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">arguments</span>)
  <span class="ruby-identifier">configuration</span> = <span class="ruby-identifier">arguments</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">class_for_adapter</span>(<span class="ruby-identifier">configuration</span>[<span class="ruby-string">&#39;adapter&#39;</span>]).<span class="ruby-identifier">new</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">arguments</span>).<span class="ruby-identifier">drop</span>
  <span class="ruby-identifier">$stdout</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;Dropped database &#39;#{configuration[&#39;database&#39;]}&#39;&quot;</span>
<span class="ruby-keyword">rescue</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">NoDatabaseError</span>
  <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;Database &#39;#{configuration[&#39;database&#39;]}&#39; does not exist&quot;</span>
<span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">error</span>
  <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-identifier">error</span>
  <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;Couldn&#39;t drop database &#39;#{configuration[&#39;database&#39;]}&#39;&quot;</span>
  <span class="ruby-identifier">raise</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-drop_all" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">drop_all</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="drop_all-source">
            <pre><span class="ruby-comment"># File lib/active_record/tasks/database_tasks.rb, line 146</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">drop_all</span>
  <span class="ruby-identifier">each_local_configuration</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">configuration</span><span class="ruby-operator">|</span> <span class="ruby-identifier">drop</span> <span class="ruby-identifier">configuration</span> }
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-drop_current" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">drop_current</span><span
            class="method-args">(environment = env)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="drop_current-source">
            <pre><span class="ruby-comment"># File lib/active_record/tasks/database_tasks.rb, line 150</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">drop_current</span>(<span class="ruby-identifier">environment</span> = <span class="ruby-identifier">env</span>)
  <span class="ruby-identifier">each_current_configuration</span>(<span class="ruby-identifier">environment</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">configuration</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">drop</span> <span class="ruby-identifier">configuration</span>
  }
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-env" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">env</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="env-source">
            <pre><span class="ruby-comment"># File lib/active_record/tasks/database_tasks.rb, line 90</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">env</span>
  <span class="ruby-ivar">@env</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">Rails</span>.<span class="ruby-identifier">env</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-fixtures_path" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">fixtures_path</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="fixtures_path-source">
            <pre><span class="ruby-comment"># File lib/active_record/tasks/database_tasks.rb, line 78</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">fixtures_path</span>
  <span class="ruby-ivar">@fixtures_path</span> <span class="ruby-operator">||=</span> <span class="ruby-keyword">if</span> <span class="ruby-constant">ENV</span>[<span class="ruby-string">&#39;FIXTURES_PATH&#39;</span>]
                       <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">root</span>, <span class="ruby-constant">ENV</span>[<span class="ruby-string">&#39;FIXTURES_PATH&#39;</span>])
                     <span class="ruby-keyword">else</span>
                       <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">root</span>, <span class="ruby-string">&#39;test&#39;</span>, <span class="ruby-string">&#39;fixtures&#39;</span>)
                     <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-load_schema_current" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">load_schema_current</span><span
            class="method-args">(format = ActiveRecord::Base.schema_format, file = nil, environment = env)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="load_schema_current-source">
            <pre><span class="ruby-comment"># File lib/active_record/tasks/database_tasks.rb, line 251</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">load_schema_current</span>(<span class="ruby-identifier">format</span> = <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">schema_format</span>, <span class="ruby-identifier">file</span> = <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">environment</span> = <span class="ruby-identifier">env</span>)
  <span class="ruby-identifier">each_current_configuration</span>(<span class="ruby-identifier">environment</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">configuration</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">load_schema</span> <span class="ruby-identifier">configuration</span>, <span class="ruby-identifier">format</span>, <span class="ruby-identifier">file</span>
  }
  <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">establish_connection</span>(<span class="ruby-identifier">environment</span>.<span class="ruby-identifier">to_sym</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-load_schema_for" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">load_schema_for</span><span
            class="method-args">(*args)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="load_schema_for-source">
            <pre><span class="ruby-comment"># File lib/active_record/tasks/database_tasks.rb, line 234</span>
      <span class="ruby-keyword">def</span> <span class="ruby-identifier">load_schema_for</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
        <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Deprecation</span>.<span class="ruby-identifier">warn</span>(<span class="ruby-string">&quot;          This method was renamed to `#load_schema` and will be removed in the future.
          Use `#load_schema` instead.
&quot;</span>.<span class="ruby-identifier">squish</span>)
        <span class="ruby-identifier">load_schema</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
      <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-load_seed" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">load_seed</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="load_seed-source">
            <pre><span class="ruby-comment"># File lib/active_record/tasks/database_tasks.rb, line 266</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">load_seed</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">seed_loader</span>
    <span class="ruby-identifier">seed_loader</span>.<span class="ruby-identifier">load_seed</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-string">&quot;You tried to load seed data, but no seed loader is specified. Please specify seed &quot;</span> <span class="ruby-operator">+</span>
          <span class="ruby-string">&quot;loader with ActiveRecord::Tasks::DatabaseTasks.seed_loader = your_seed_loader\n&quot;</span> <span class="ruby-operator">+</span>
          <span class="ruby-string">&quot;Seed loader should respond to load_seed method&quot;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-migrate" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">migrate</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="migrate-source">
            <pre><span class="ruby-comment"># File lib/active_record/tasks/database_tasks.rb, line 156</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">migrate</span>
  <span class="ruby-identifier">verbose</span> = <span class="ruby-constant">ENV</span>[<span class="ruby-string">&quot;VERBOSE&quot;</span>] <span class="ruby-operator">?</span> <span class="ruby-constant">ENV</span>[<span class="ruby-string">&quot;VERBOSE&quot;</span>] <span class="ruby-operator">==</span> <span class="ruby-string">&quot;true&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-keyword">true</span>
  <span class="ruby-identifier">version</span> = <span class="ruby-constant">ENV</span>[<span class="ruby-string">&quot;VERSION&quot;</span>] <span class="ruby-operator">?</span> <span class="ruby-constant">ENV</span>[<span class="ruby-string">&quot;VERSION&quot;</span>].<span class="ruby-identifier">to_i</span> <span class="ruby-operator">:</span> <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">scope</span>   = <span class="ruby-constant">ENV</span>[<span class="ruby-string">&#39;SCOPE&#39;</span>]
  <span class="ruby-identifier">verbose_was</span>, <span class="ruby-constant">Migration</span>.<span class="ruby-identifier">verbose</span> = <span class="ruby-constant">Migration</span>.<span class="ruby-identifier">verbose</span>, <span class="ruby-identifier">verbose</span>
  <span class="ruby-constant">Migrator</span>.<span class="ruby-identifier">migrate</span>(<span class="ruby-identifier">migrations_paths</span>, <span class="ruby-identifier">version</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">migration</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">scope</span>.<span class="ruby-identifier">blank?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">scope</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">migration</span>.<span class="ruby-identifier">scope</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">clear_cache!</span>
<span class="ruby-keyword">ensure</span>
  <span class="ruby-constant">Migration</span>.<span class="ruby-identifier">verbose</span> = <span class="ruby-identifier">verbose_was</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-migrations_paths" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">migrations_paths</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="migrations_paths-source">
            <pre><span class="ruby-comment"># File lib/active_record/tasks/database_tasks.rb, line 74</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">migrations_paths</span>
  <span class="ruby-ivar">@migrations_paths</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">Rails</span>.<span class="ruby-identifier">application</span>.<span class="ruby-identifier">paths</span>[<span class="ruby-string">&#39;db/migrate&#39;</span>].<span class="ruby-identifier">to_a</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-purge" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">purge</span><span
            class="method-args">(configuration)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="purge-source">
            <pre><span class="ruby-comment"># File lib/active_record/tasks/database_tasks.rb, line 187</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">purge</span>(<span class="ruby-identifier">configuration</span>)
  <span class="ruby-identifier">class_for_adapter</span>(<span class="ruby-identifier">configuration</span>[<span class="ruby-string">&#39;adapter&#39;</span>]).<span class="ruby-identifier">new</span>(<span class="ruby-identifier">configuration</span>).<span class="ruby-identifier">purge</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-purge_all" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">purge_all</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="purge_all-source">
            <pre><span class="ruby-comment"># File lib/active_record/tasks/database_tasks.rb, line 191</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">purge_all</span>
  <span class="ruby-identifier">each_local_configuration</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">configuration</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">purge</span> <span class="ruby-identifier">configuration</span>
  }
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-purge_current" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">purge_current</span><span
            class="method-args">(environment = env)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="purge_current-source">
            <pre><span class="ruby-comment"># File lib/active_record/tasks/database_tasks.rb, line 197</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">purge_current</span>(<span class="ruby-identifier">environment</span> = <span class="ruby-identifier">env</span>)
  <span class="ruby-identifier">each_current_configuration</span>(<span class="ruby-identifier">environment</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">configuration</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">purge</span> <span class="ruby-identifier">configuration</span>
  }
  <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">establish_connection</span>(<span class="ruby-identifier">environment</span>.<span class="ruby-identifier">to_sym</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-register_task" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">register_task</span><span
            class="method-args">(pattern, task)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="register_task-source">
            <pre><span class="ruby-comment"># File lib/active_record/tasks/database_tasks.rb, line 61</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">register_task</span>(<span class="ruby-identifier">pattern</span>, <span class="ruby-identifier">task</span>)
  <span class="ruby-ivar">@tasks</span> <span class="ruby-operator">||=</span> {}
  <span class="ruby-ivar">@tasks</span>[<span class="ruby-identifier">pattern</span>] = <span class="ruby-identifier">task</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-root" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">root</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="root-source">
            <pre><span class="ruby-comment"># File lib/active_record/tasks/database_tasks.rb, line 86</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">root</span>
  <span class="ruby-ivar">@root</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">Rails</span>.<span class="ruby-identifier">root</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-schema_file" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">schema_file</span><span
            class="method-args">(format = ActiveRecord::Base.schema_format)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="schema_file-source">
            <pre><span class="ruby-comment"># File lib/active_record/tasks/database_tasks.rb, line 242</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">schema_file</span>(<span class="ruby-identifier">format</span> = <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">schema_format</span>)
  <span class="ruby-keyword">case</span> <span class="ruby-identifier">format</span>
  <span class="ruby-keyword">when</span> <span class="ruby-value">:ruby</span>
    <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">db_dir</span>, <span class="ruby-string">&quot;schema.rb&quot;</span>)
  <span class="ruby-keyword">when</span> <span class="ruby-value">:sql</span>
    <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">db_dir</span>, <span class="ruby-string">&quot;structure.sql&quot;</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-seed_loader" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">seed_loader</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="seed_loader-source">
            <pre><span class="ruby-comment"># File lib/active_record/tasks/database_tasks.rb, line 94</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">seed_loader</span>
  <span class="ruby-ivar">@seed_loader</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">Rails</span>.<span class="ruby-identifier">application</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-structure_dump" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">structure_dump</span><span
            class="method-args">(*arguments)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="structure_dump-source">
            <pre><span class="ruby-comment"># File lib/active_record/tasks/database_tasks.rb, line 204</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">structure_dump</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">arguments</span>)
  <span class="ruby-identifier">configuration</span> = <span class="ruby-identifier">arguments</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">filename</span> = <span class="ruby-identifier">arguments</span>.<span class="ruby-identifier">delete_at</span> <span class="ruby-value">1</span>
  <span class="ruby-identifier">class_for_adapter</span>(<span class="ruby-identifier">configuration</span>[<span class="ruby-string">&#39;adapter&#39;</span>]).<span class="ruby-identifier">new</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">arguments</span>).<span class="ruby-identifier">structure_dump</span>(<span class="ruby-identifier">filename</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-structure_load" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">structure_load</span><span
            class="method-args">(*arguments)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="structure_load-source">
            <pre><span class="ruby-comment"># File lib/active_record/tasks/database_tasks.rb, line 210</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">structure_load</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">arguments</span>)
  <span class="ruby-identifier">configuration</span> = <span class="ruby-identifier">arguments</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">filename</span> = <span class="ruby-identifier">arguments</span>.<span class="ruby-identifier">delete_at</span> <span class="ruby-value">1</span>
  <span class="ruby-identifier">class_for_adapter</span>(<span class="ruby-identifier">configuration</span>[<span class="ruby-string">&#39;adapter&#39;</span>]).<span class="ruby-identifier">new</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">arguments</span>).<span class="ruby-identifier">structure_load</span>(<span class="ruby-identifier">filename</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="private-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Private Instance Methods</h3>
       </header>

    
      <div id="method-i-class_for_adapter" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">class_for_adapter</span><span
            class="method-args">(adapter)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="class_for_adapter-source">
            <pre><span class="ruby-comment"># File lib/active_record/tasks/database_tasks.rb, line 278</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">class_for_adapter</span>(<span class="ruby-identifier">adapter</span>)
  <span class="ruby-identifier">key</span> = <span class="ruby-ivar">@tasks</span>.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">detect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">pattern</span><span class="ruby-operator">|</span> <span class="ruby-identifier">adapter</span>[<span class="ruby-identifier">pattern</span>] }
  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">key</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">DatabaseNotSupported</span>, <span class="ruby-node">&quot;Rake tasks not supported by &#39;#{adapter}&#39; adapter&quot;</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-ivar">@tasks</span>[<span class="ruby-identifier">key</span>]
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-each_current_configuration" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">each_current_configuration</span><span
            class="method-args">(environment) { |configuration| ... }</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="each_current_configuration-source">
            <pre><span class="ruby-comment"># File lib/active_record/tasks/database_tasks.rb, line 286</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">each_current_configuration</span>(<span class="ruby-identifier">environment</span>)
  <span class="ruby-identifier">environments</span> = [<span class="ruby-identifier">environment</span>]
  <span class="ruby-identifier">environments</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&#39;test&#39;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">environment</span> <span class="ruby-operator">==</span> <span class="ruby-string">&#39;development&#39;</span>

  <span class="ruby-identifier">configurations</span> = <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">configurations</span>.<span class="ruby-identifier">values_at</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">environments</span>)
  <span class="ruby-identifier">configurations</span>.<span class="ruby-identifier">compact</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">configuration</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">yield</span> <span class="ruby-identifier">configuration</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">configuration</span>[<span class="ruby-string">&#39;database&#39;</span>].<span class="ruby-identifier">blank?</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-each_local_configuration" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">each_local_configuration</span><span
            class="method-args">() { |configuration| ... }</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="each_local_configuration-source">
            <pre><span class="ruby-comment"># File lib/active_record/tasks/database_tasks.rb, line 296</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">each_local_configuration</span>
  <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">configurations</span>.<span class="ruby-identifier">each_value</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">configuration</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">next</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">configuration</span>[<span class="ruby-string">&#39;database&#39;</span>]

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">local_database?</span>(<span class="ruby-identifier">configuration</span>)
      <span class="ruby-keyword">yield</span> <span class="ruby-identifier">configuration</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;This task only modifies local databases. #{configuration[&#39;database&#39;]} is on a remote host.&quot;</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-local_database-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">local_database?</span><span
            class="method-args">(configuration)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="local_database-3F-source">
            <pre><span class="ruby-comment"># File lib/active_record/tasks/database_tasks.rb, line 308</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">local_database?</span>(<span class="ruby-identifier">configuration</span>)
  <span class="ruby-identifier">configuration</span>[<span class="ruby-string">&#39;host&#39;</span>].<span class="ruby-identifier">blank?</span> <span class="ruby-operator">||</span> <span class="ruby-constant">LOCAL_HOSTS</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">configuration</span>[<span class="ruby-string">&#39;host&#39;</span>])
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://docs.seattlerb.org/rdoc/">RDoc</a> 4.3.0.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

